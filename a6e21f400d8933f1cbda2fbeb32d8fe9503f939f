{
  "comments": [
    {
      "key": {
        "uuid": "53e069f8_738f1aa3",
        "filename": "resources/libraries/bash/function/common.sh",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1263
      },
      "writtenOn": "2020-10-09T11:14:52Z",
      "side": 1,
      "message": "I have seen the internal e-mail from Dave, \"RE: VPP Device issue with executor\".\nBut as an non-expert, the IP address looks like magic to me. Maybe add a few comment lines explaining how this fits into our infra?",
      "range": {
        "startLine": 53,
        "startChar": 26,
        "endLine": 53,
        "endChar": 36
      },
      "revId": "a6e21f400d8933f1cbda2fbeb32d8fe9503f939f",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62037f5e_3786dc30",
        "filename": "resources/libraries/bash/function/common.sh",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 10
      },
      "writtenOn": "2020-10-09T17:21:41Z",
      "side": 1,
      "message": "This works because we use the default docker bridge network addressing:\n\n[from https://docs.docker.com/network/network-tutorial-standalone/]: \n\"the default bridge network, whose gateway is 172.17.0.1\"\n\nInvestigating this led me to a better solution which is to extract the Gateway address from the output of \u0027docker network inspect bridge\u0027:\n\ndocker_gateway_ip4\u003d\"$(sudo docker network inspect bridge | jq \u0027.[].IPAM.Config[0].Gateway\u0027 | sed -e \u0027s/\"//g\u0027)\"\n\nThen it will still work if the docker network bridge default gateway ip address changes or is explicitly configured in /etc/docker/daemon.json",
      "parentUuid": "53e069f8_738f1aa3",
      "range": {
        "startLine": 53,
        "startChar": 26,
        "endLine": 53,
        "endChar": 36
      },
      "revId": "a6e21f400d8933f1cbda2fbeb32d8fe9503f939f",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2eb1f94d_f6e2e3fc",
        "filename": "resources/libraries/bash/function/common.sh",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 576
      },
      "writtenOn": "2020-10-12T07:28:04Z",
      "side": 1,
      "message": "This still assumes that the executor will be created in the default \"bridge\" bridge network, but that seems like a safe assumption. I\u0027ll change it.",
      "parentUuid": "62037f5e_3786dc30",
      "range": {
        "startLine": 53,
        "startChar": 26,
        "endLine": 53,
        "endChar": 36
      },
      "revId": "a6e21f400d8933f1cbda2fbeb32d8fe9503f939f",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b9942c2_a15ba5f7",
        "filename": "resources/libraries/bash/function/common.sh",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 576
      },
      "writtenOn": "2020-10-12T08:02:32Z",
      "side": 1,
      "message": "The executor doesn\u0027t have access to the docker on the host, so we\u0027ll have to think of something else (giving the executor access is too much of a security hole IMO). We could hardcode it to 172.17.0.1, set it as Jenkins variable or maybe something else.",
      "parentUuid": "2eb1f94d_f6e2e3fc",
      "range": {
        "startLine": 53,
        "startChar": 26,
        "endLine": 53,
        "endChar": 36
      },
      "revId": "a6e21f400d8933f1cbda2fbeb32d8fe9503f939f",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}