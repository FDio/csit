---
logging:
  version: 1
  formatters:
    console_stdout:
      format: '%(asctime)s - %(name)s - %(message)s'
    console_stderr:
      format: '%(message)s'
    prom:
      format: '%(message)s'
  handlers:
    console_stdout:
      class: logging.StreamHandler
      level: INFO
      formatter: console_stdout
      stream: ext://sys.stdout
    console_stderr:
      class: logging.StreamHandler
      level: ERROR
      formatter: console_stderr
      stream: ext://sys.stderr
    prom:
      class: logging.handlers.RotatingFileHandler
      level: INFO
      formatter: prom
      filename: /tmp/metric.prom
      mode: w
  loggers:
    prom:
      handlers: [prom]
      level: INFO
      propagate: False
  root:
    level: INFO
    handlers: [console_stdout, console_stderr]
scheduler:
  duration: 1
programs:
  - name: bundle_perf_stat
    metrics:
      gauge:
        - name: cpu_cycles
          documentation: Cycles processed by CPUs
    events:
      - name: cpu_cycles # 0x3C
  - name: bundle_perf_stat
    metrics:
      gauge:
        - name: cpu_instruction
          documentation: Instructions retired by CPUs
    events:
      - name: cpu_instruction # 0xC0
  - name: bundle_perf_stat
    metrics:
      gauge:
        - name: cache_references
          documentation: Cache references
    events:
      - name:  cache_references # name: 0x2e umask: 0x4f
  - name: bundle_perf_stat
    metrics:
      gauge:
        - name: cache_miss
          documentation: Cache misses
    events:
      - name: cache_miss # name: 0x2e umask: 0x41
  - name: bundle_perf_stat
    metrics:
      gauge:
        - name: sw_context_switches
          documentation: SW context switches
    events:
      - name: context_switches # type: 0x1 name: 0x3
  - name: bundle_perf_stat
    metrics:
      gauge:
        - name: sw_page_faults_min
          documentation: SW page faults minor
    events:
      - name: page_faults_min # type: 0x1 ame: 0x5
  - name: bundle_perf_stat
    metrics:
      gauge:
        - name: sw_page_faults_maj
          documentation: SW page faults major
    events:
      - name: page_faults_maj # type: 0x1 name: 0x6
