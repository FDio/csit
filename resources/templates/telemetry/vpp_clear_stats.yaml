---
logging:
  version: 1
  formatters:
    console_stdout:
      format: '%(asctime)s - %(name)s - %(message)s'
    console_stderr:
      format: '%(message)s'
    prom:
      format: '%(message)s'
  handlers:
    console_stdout:
      class: logging.StreamHandler
      level: INFO
      formatter: console_stdout
      stream: ext://sys.stdout
    console_stderr:
      class: logging.StreamHandler
      level: ERROR
      formatter: console_stderr
      stream: ext://sys.stderr
    prom:
      class: logging.handlers.RotatingFileHandler
      level: INFO
      formatter: prom
      filename: /tmp/metric.prom
      mode: w
  loggers:
    prom:
      handlers: [prom]
      level: INFO
      propagate: False
  root:
    level: INFO
    handlers: [console_stdout, console_stderr]
scheduler:
  duration: 1
programs:
  - name: bundle_vpp
    metrics: {}
    code: |
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
      wait 0.001
  - name: bundle_vpp
    metrics:
      gauge:
        - name: calls
          documentation: Number of calls total
          labelnames:
            - name
            - state
            - thread_name
            - thread_id
            - thread_lcore
        - name: vectors
          documentation: Number of vectors total
          labelnames:
            - name
            - state
            - thread_name
            - thread_id
            - thread_lcore
        - name: suspends
          documentation: Number of suspends total
          labelnames:
            - name
            - state
            - thread_name
            - thread_id
            - thread_lcore
        - name: clocks
          documentation: Number of clocks total
          labelnames:
            - name
            - state
            - thread_name
            - thread_id
            - thread_lcore
        - name: vectors_calls
          documentation: Number of vectors per call
          labelnames:
            - name
            - state
            - thread_name
            - thread_id
            - thread_lcore
    code: |
      clear runtime
