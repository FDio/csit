-
  type: "environment"

  paths:
    # Top level directories:
    ## Working directory
    DIR[WORKING]: "_tmp"
    ## Build directories
    DIR[BUILD,HTML]: "_build"
    DIR[BUILD,LATEX]: "_build_latex"

    # Static .rst files
    DIR[RST]: "../../../docs/report"

    # Working directories
    ## Input data files (.zip, .xml)
    DIR[WORKING,DATA]: "{DIR[WORKING]}/data"
    ## Static source files from git
    DIR[WORKING,SRC]: "{DIR[WORKING]}/src"
    DIR[WORKING,SRC,STATIC]: "{DIR[WORKING,SRC]}/_static"

    # Static html content
    DIR[STATIC]: "{DIR[BUILD,HTML]}/_static"
    DIR[STATIC,VPP]: "{DIR[STATIC]}/vpp"
    DIR[STATIC,DPDK]: "{DIR[STATIC]}/dpdk"
    DIR[STATIC,ARCH]: "{DIR[STATIC]}/archive"

    # Detailed test results
    DIR[DTR]: "{DIR[WORKING,SRC]}/detailed_test_results"
    DIR[DTR,PERF,DPDK]: "{DIR[DTR]}/dpdk_performance_results"
    DIR[DTR,PERF,VPP]: "{DIR[DTR]}/vpp_performance_results"
    DIR[DTR,MRR,VPP]: "{DIR[DTR]}/vpp_mrr_results"
    DIR[DTR,PERF,COT]: "{DIR[DTR]}/cot_performance_results"
    DIR[DTR,PERF,HC]: "{DIR[DTR]}/honeycomb_performance_results"
    DIR[DTR,FUNC,VPP]: "{DIR[DTR]}/vpp_functional_results"
    DIR[DTR,FUNC,VPP,CENTOS]: "{DIR[DTR]}/vpp_functional_results_centos"
    DIR[DTR,FUNC,HC]: "{DIR[DTR]}/honeycomb_functional_results"
    DIR[DTR,FUNC,NSHSFC]: "{DIR[DTR]}/nshsfc_functional_results"
    DIR[DTR,PERF,VPP,IMPRV]: "{DIR[WORKING,SRC]}/vpp_performance_tests/performance_improvements"

    # Detailed test configurations
    DIR[DTC]: "{DIR[WORKING,SRC]}/test_configuration"
    DIR[DTC,PERF,VPP]: "{DIR[DTC]}/vpp_performance_configuration"
    DIR[DTC,MRR,VPP]: "{DIR[DTC]}/vpp_mrr_configuration"
    DIR[DTC,FUNC,VPP]: "{DIR[DTC]}/vpp_functional_configuration"
    DIR[DTC,FUNC,VPP,CENTOS]: "{DIR[DTC]}/vpp_functional_configuration_centos"

    # Detailed tests operational data
    DIR[DTO]: "{DIR[WORKING,SRC]}/test_operational_data"
    DIR[DTO,PERF,VPP]: "{DIR[DTO]}/vpp_performance_operational_data"

    # .css patch file to fix tables generated by Sphinx
    DIR[CSS_PATCH_FILE]: "{DIR[STATIC]}/theme_overrides.css"
    DIR[CSS_PATCH_FILE2]: "{DIR[WORKING,SRC,STATIC]}/theme_overrides.css"

  urls:
    URL[JENKINS,CSIT]: "https://jenkins.fd.io/view/csit/job"
    URL[JENKINS,HC]: "https://jenkins.fd.io/view/hc2vpp/job"
    URL[NEXUS]: "https://docs.fd.io/csit"
    DIR[NEXUS]: "report/_static/archive"

  make-dirs:
  # List the directories which are created while preparing the environment.
  # All directories MUST be defined in "paths" section.
  - "DIR[WORKING,DATA]"
  - "DIR[STATIC,VPP]"
  - "DIR[STATIC,DPDK]"
  - "DIR[STATIC,ARCH]"
  - "DIR[BUILD,LATEX]"
  - "DIR[WORKING,SRC]"
  - "DIR[WORKING,SRC,STATIC]"

  remove-dirs:
  # List the directories which are deleted while cleaning the environment.
  # All directories MUST be defined in "paths" section.
  #- "DIR[BUILD,HTML]"
  - "DIR[WORKING,DATA]"

  build-dirs:
  # List the directories where the results (build) is stored.
  # All directories MUST be defined in "paths" section.
  - "DIR[BUILD,HTML]"
  - "DIR[BUILD,LATEX]"

-
  type: "configuration"
  data-sets:
    plot-vpp-throughput-latency-3n-hsw:
      csit-vpp-perf-verify-master-3n-hsw:
      - 45
    plot-throughput-speedup-analysis-3n-hsw:
      csit-vpp-perf-verify-master-3n-hsw:
      - 45
    plot-vpp-http-server-performance:
      csit-vpp-perf-1804-all:
      - 39  # wrk
      - 40  # wrk
      - 41  # wrk
    vpp-performance-changes:
      csit-vpp-perf-1710-all:
      - 11
      csit-vpp-perf-1801-all:
      - 124  # sel
      csit-vpp-perf-verify-master-3n-hsw:
      - 45
    vpp-performance-changes-mrr:
      csit-vpp-perf-check-1801:
      - 3
      - 4
      csit-vpp-perf-check-1804:
      - 6   # mrr - sel
      - 13  # mrr - sel



  plot-layouts:

    plot-cps:
      xaxis:
        autorange: True
        fixedrange: False
        gridcolor: "rgb(238, 238, 238)"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        tickmode: "linear"
        title: "Indexed Test Cases"
        zeroline: False
      yaxis:
        gridcolor: "rgb(238, 238, 238)"
        hoverformat: ".4s"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        rangemode: "tozero"
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        title: "Connections Per Second [cps]"
        zeroline: False
      boxmode: "group"
      boxgroupgap: 0.5
      autosize: False
      margin:
        t: 50
        b: 20
        l: 50
        r: 20
      showlegend: True
      legend:
        orientation: "h"
      width: 700
      height: 1000

    plot-rps:
      xaxis:
        autorange: True
        fixedrange: False
        gridcolor: "rgb(238, 238, 238)"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        tickmode: "linear"
        title: "Indexed Test Cases"
        zeroline: False
      yaxis:
        gridcolor: "rgb(238, 238, 238)"
        hoverformat: ".4s"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        rangemode: "tozero"
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        title: "Requests Per Second [rps]"
        zeroline: False
      boxmode: "group"
      boxgroupgap: 0.5
      autosize: False
      margin:
        t: 50
        b: 20
        l: 50
        r: 20
      showlegend: True
      legend:
        orientation: "h"
      width: 700
      height: 1000

    plot-throughput:
      xaxis:
        autorange: True
        fixedrange: False
        gridcolor: "rgb(238, 238, 238)"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        tickmode: "linear"
        title: "Indexed Test Cases"
        zeroline: False
      yaxis:
        gridcolor: "rgb(238, 238, 238)"
        hoverformat: ".4s"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        title: "Packets Per Second [pps]"
        zeroline: False
      boxmode: "group"
      boxgroupgap: 0.5
      autosize: False
      margin:
        t: 50
        b: 20
        l: 50
        r: 20
      showlegend: True
      legend:
        orientation: "h"
      width: 700
      height: 1000

    plot-latency:
      xaxis:
        autorange: True
        fixedrange: False
        gridcolor: "rgb(238, 238, 238)"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        tickmode: "linear"
        title: "Indexed Test Cases"
        zeroline: False
      yaxis:
        gridcolor: "rgb(238, 238, 238)"
        hoverformat: ""
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        title: "Latency min/avg/max [uSec]"
        zeroline: False
      boxmode: "group"
      boxgroupgap: 0.5
      autosize: False
      margin:
        t: 50
        b: 20
        l: 50
        r: 20
      showlegend: True
      legend:
        orientation: "h"
      width: 700
      height: 1000

    plot-throughput-speedup-analysis:
      xaxis:
        autorange: True
        fixedrange: False
        gridcolor: "rgb(238, 238, 238)"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        tickmode: "linear"
        tickangle: 270
        zeroline: False
      yaxis:
        title: "Throughput speedup factor"
        gridcolor: "rgb(238, 238, 238)"
        hoverformat: ".4s"
        linecolor: "rgb(238, 238, 238)"
        linewidth: 1
        showgrid: True
        showline: True
        showticklabels: True
        tickcolor: "rgb(238, 238, 238)"
        zeroline: False
      legend:
        orientation: "h"
        xanchor: "center"
        yanchor: "top"
        x: 0.5
        y: 1
        bgcolor: "rgba(255, 255, 255, 0)"
        bordercolor: "rgba(255, 255, 255, 0)"
      barmode: "group"
      bargap: 0.15
      bargroupgap: 0.1
      autosize: False
      margin:
          't': 50
          'b': 300
          'l': 50
          'r': 20
      showlegend: True
      width: 700
      height: 1000

-
  type: "static"
  src-path: "{DIR[RST]}"
  dst-path: "{DIR[WORKING,SRC]}"

-
  type: "input"  # Ignored in debug mode
  general:
    file-name: "robot-plugin.zip"
    file-format: ".zip"
    download-path: "{job}/{build}/robot/report/*zip*/{filename}"
    extract: "robot-plugin/output.xml"
  builds:
    csit-vpp-perf-verify-master-3n-hsw:
    - 45
    csit-vpp-perf-1804-all:
    - 21  # sel
    - 39  # wrk
    - 40  # wrk
    - 41  # wrk
    csit-vpp-perf-1710-all:
    - 11
    csit-vpp-perf-1801-all:
    - 124  # sel
    csit-vpp-perf-check-1801:
    - 3
    - 4
    csit-vpp-perf-check-1804:
    - 6   # mrr - sel
    - 13  # mrr - sel


-
  type: "output"
  output: "report"
  format:
    html:
    - full
#    pdf:
#    - minimal


-
  type: "table"
  title: "VPP Performance Changes"
  algorithm: "table_performance_comparison"
  output-file: "{DIR[STATIC,VPP]}/performance-changes-1t1c-pdr"
  history:
    -
      title: "rls1710"
      data:
        csit-vpp-perf-1710-all:
        - 11
  reference:
    title: "rls1801"
    data:
      csit-vpp-perf-1801-all:
      - 124  # sel
  compare:
    title: "rls1804"
    data:
      csit-vpp-perf-verify-master-3n-hsw:
      - 45
  data: "vpp-performance-changes"
  include-tests: "PDR" # "PDR" | "NDR" | "MRR"
  filter: "'1T1C' and ('NDRPDR' or 'NDRPDRDISC')" # "('NDRPDR' or 'NDRPDRDISC')" | "'MRR'"
  parameters:
  - "name"
  - "parent"
  - "throughput"

-
  type: "table"
  title: "VPP Performance Changes - MRR"
  algorithm: "table_performance_comparison"
  output-file: "{DIR[STATIC,VPP]}/performance-changes-1t1c-mrr"
  reference:
    title: "Release 1801"
    data:
      csit-vpp-perf-check-1801:
      - 3
      - 4
  compare:
    title: "Release 1804"
    data:
      csit-vpp-perf-check-1804:
      - 6   # mrr - sel
      - 13  # mrr - sel
  data: "vpp-performance-changes-mrr"
  include-tests: "MRR" # "PDR" | "NDR" | "MRR"
  filter: "'1T1C' and 'MRR'" # "('NDRPDR' or 'NDRPDRDISC')" | "'MRR'"
  parameters:
  - "name"
  - "parent"
  - "result"


# Packet Throughput - VPP vhost l2sw 3n-hsw-x520
-
  type: "plot"
  title: "VPP Throughput: vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-ndr"
  algorithm: "plot_performance_box"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-ndr"
  data: "plot-vpp-throughput-latency-3n-hsw"
  filter: "'NIC_Intel-X520-DA2' and
           '64B' and
           'NDRPDR' and
           '1T1C' and
           'VHOST' and
           not 'VXLAN' and
           not 'IP4FWD' and
           not 'DOT1Q' and
           not '2VM'"
  parameters:
  - "throughput"
  - "parent"
  traces:
    hoverinfo: "x+y"
    boxpoints: "outliers"
    whiskerwidth: 0
  layout:
    title: ""  # No title
    layout: "plot-throughput"

-
  type: "plot"
  title: "VPP Throughput: vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-pdr"
  algorithm: "plot_performance_box"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-pdr"
  data: "plot-vpp-throughput-latency-3n-hsw"
  filter: "'NIC_Intel-X520-DA2' and
           '64B' and
           'NDRPDR' and
           '1T1C' and
           'VHOST' and
           not 'VXLAN' and
           not 'IP4FWD' and
           not 'DOT1Q' and
           not '2VM'"
  parameters:
  - "throughput"
  - "parent"
  traces:
    hoverinfo: "x+y"
    boxpoints: "outliers"
    whiskerwidth: 0
  layout:
    title: ""  # No title
    layout: "plot-throughput"

# Packet Latency - VPP vhost l2sw 3n-hsw-x520
-
  type: "plot"
  title: "VPP Latency: vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-ndr-lat"
  algorithm: "plot_latency_box"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-ndr-lat"
  data: "plot-vpp-throughput-latency-3n-hsw"
  filter: "'NIC_Intel-X520-DA2' and
           '64B' and
           'NDRPDR' and
           '1T1C' and
           'VHOST' and
           not 'VXLAN' and
           not 'IP4FWD' and
           not 'DOT1Q' and
           not '2VM'"
  parameters:
  - "latency"
  - "parent"
  traces:
    boxmean: False
  layout:
    title: ""  # No title
    layout: "plot-latency"

-
  type: "plot"
  title: "VPP Latency: vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-pdr-lat"
  algorithm: "plot_latency_box"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/vhost-l2sw-3n-hsw-x520-64b-1t1c-base_and_scale-pdr-lat"
  data: "plot-vpp-throughput-latency-3n-hsw"
  filter: "'NIC_Intel-X520-DA2' and
           '64B' and
           'NDRPDR' and
           '1T1C' and
           'VHOST' and
           not 'VXLAN' and
           not 'IP4FWD' and
           not 'DOT1Q' and
           not '2VM'"
  parameters:
  - "latency"
  - "parent"
  traces:
    boxmean: False
  layout:
    title: ""  # No title
    layout: "plot-latency"

# Speedup - VPP vhost l2sw 3n-hsw-x520
-
  type: "plot"
  title: "VPP Speedup: vhost-l2sw-3n-hsw-x520-64b-base_and_scale-ndr-tsa"
  algorithm: "plot_throughput_speedup_analysis"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/vhost-l2sw-3n-hsw-x520-64b-base_and_scale-ndr-tsa"
  data: "plot-throughput-speedup-analysis-3n-hsw"
  filter: "'NIC_Intel-X520-DA2' and
           '64B' and
           'NDRPDR' and
           'VHOST' and
           not 'VXLAN' and
           not 'IP4FWD' and
           not 'DOT1Q' and
           not '2VM'"
  parameters:
  - "throughput"
  - "parent"
  - "tags"
  layout:
    title: ""  # No title
    layout: "plot-throughput-speedup-analysis"

-
  type: "plot"
  title: "VPP Speedup: vhost-l2sw-3n-hsw-x520-64b-base_and_scale-pdr-tsa"
  algorithm: "plot_throughput_speedup_analysis"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/vhost-l2sw-3n-hsw-x520-64b-base_and_scale-pdr-tsa"
  data: "plot-throughput-speedup-analysis-3n-hsw"
  filter: "'NIC_Intel-X520-DA2' and
           '64B' and
           'NDRPDR' and
           'VHOST' and
           not 'VXLAN' and
           not 'IP4FWD' and
           not 'DOT1Q' and
           not '2VM'"
  parameters:
  - "throughput"
  - "parent"
  - "tags"
  layout:
    title: ""  # No title
    layout: "plot-throughput-speedup-analysis"

# Plots VPP HTTP Server Performance
-
  type: "plot"
  title: "VPP HTTP Server Performance"
  algorithm: "plot_http_server_performance_box"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/http-server-performance-cps"
  data: "plot-vpp-http-server-performance"
  # Keep this formatting, the filter is enclosed with " (quotation mark) and
  # each tag is enclosed with ' (apostrophe).
  filter: "'HTTP' and 'TCP_CPS'"
  parameters:
  - "result"
  - "name"
  traces:
    hoverinfo: "x+y"
    boxpoints: "outliers"
    whiskerwidth: 0
  layout:
    title: "VPP HTTP Server Performance"
    layout:
      "plot-cps"

-
  type: "plot"
  title: "VPP HTTP Server Performance"
  algorithm: "plot_http_server_performance_box"
  output-file-type: ".html"
  output-file: "{DIR[STATIC,VPP]}/http-server-performance-rps"
  data:
    "plot-vpp-http-server-performance"
  filter: "'HTTP' and 'TCP_RPS'"
  parameters:
  - "result"
  - "name"
  traces:
    hoverinfo: "x+y"
    boxpoints: "outliers"
    whiskerwidth: 0
  layout:
    title: "VPP HTTP Server Performance"
    layout:
      "plot-rps"