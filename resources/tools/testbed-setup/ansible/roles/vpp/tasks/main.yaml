---
# file: roles/sut/tasks/main.yaml

- Name: Update package cache (apt)
  apt:
    update_cache: yes
  when:
    - ansible_distribution|lower == 'ubuntu'

- name: SUT - Install Distribution - Release - Machine Prerequisites
  package:
    name: "{{ packages | flatten(levels=1) }}"
    state: latest
  tags:
    - install-dependencies

- name: SUT - Install VPP 19.08 PIP requirements
  pip:
    name:
      - "aenum==2.1.2"
    executable: pip2
  tags:
    - install-pip

- name: SUT - Copy 80-vpp.conf
  file:
    src: "/dev/null"
    dest: "/etc/sysctl.d/80-vpp.conf"
    state: "link"
  become: yes
  tags:
    - create-80-vpp
