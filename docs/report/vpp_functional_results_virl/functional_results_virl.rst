
.. |br| raw:: html

    <br />

DHCP - Client and Proxy
```````````````````````



eth2p-ethip4-ip4base-ip4dhcpclient-func
'''''''''''''''''''''''''''''''''''''''

**DHCPv4 Client related test cases**

+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                       | Documentation                                                                                                                                                        | Status |
+============================================================+======================================================================================================================================================================+========+
| VPP sends a DHCP DISCOVER                                  | Configure DHCPv4 client on interface to TG without hostname and check if DHCPv4 DISCOVER message contains all required fields with expected values.                  | PASS   |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| VPP sends a DHCPv4 DISCOVER with hostname                  | Configure DHCPv4 client on interface to TG with hostname and check if DHCPv4 DISCOVER message contains all required fields with expected values.                     | PASS   |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| VPP sends DHCPv4 REQUEST after OFFER                       | Configure DHCPv4 client on interface to TG and check if DHCPv4 REQUEST message contains all required fields.                                                         | PASS   |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| VPP doesn't send DHCPv4 REQUEST after OFFER with wrong XID | Configure DHCPv4 client on interface to TG. If server sends DHCPv4 OFFER with different XID as in DHCPv4 DISCOVER, DHCPv4 REQUEST message shouldn't be sent.         | FAIL   |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| VPP honors DHCPv4 lease time                               | Send IP configuration to the VPP client via DHCPv4. Address is checked with ICMP echo request and there should be no reply for echo request when lease has expired.  | PASS   |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-ip4dhcpproxy-func
''''''''''''''''''''''''''''''''''''''

**DHCPv4 proxy test cases**   

 - **[Top] Network Topologies:** TG = DUT with two links between the nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-UDP-BOOTP-DHCP  

 - **[Cfg] DUT configuration:** DUT is configured with DHCPv4 proxy.  

 - **[Ver] TG verification:** Test DHCPv4 packets are sent on TG on first link to DUT and received on TG on second link. On receive TG verifies if DHCPv4 packets are valid.

+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                    | Documentation                                                                                                                                                                                           | Status |
+=========================================================+=========================================================================================================================================================================================================+========+
| TC01: VPP proxies valid DHCPv4 request to DHCPv4 server |  |br| [Top] TG=DUT   |br| [Enc] Eth-IPv4-UDP-BOOTP-DHCP  |br| [Cfg] On DUT setup DHCPv4 proxy.  |br| [Ver] Make TG verify matching DHCPv4 packets between client and DHCPv4 server through DHCP proxy.  | PASS   |
+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: VPP proxy ignores invalid DHCPv4 request          |  |br| [Top] TG=DUT   |br| [Enc] Eth-IPv4-UDP-BOOTP-DHCP  |br| [Cfg] On DUT setup DHCPv4 proxy.  |br| [Ver] Make TG verify matching invalid DHCPv4 packets are dropped.                                  | PASS   |
+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ip6dhcpproxy-func
''''''''''''''''''''''''''''''''''''''

**DHCPv6 proxy test cases**   

 - **[Top] Network Topologies:** TG = DUT with two links between the nodes.  

 - **[Cfg] DUT configuration:** DUT is configured with DHCPv6 proxy.  

 - **[Ver] TG verification:** Test DHCPv6 packets are sent on TG on first link to DUT and received on TG on second link. On receive TG verifies if DHCPv6 packets are valid  

 - **[Ref] Applicable standard specifications:** RFC 3315

+---------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                    | Documentation                                                                                                                                                                            | Status |
+=========================================================+==========================================================================================================================================================================================+========+
| TC01: VPP proxies valid DHCPv6 request to DHCPv6 server |  |br| [Top] TG=DUT  |br| [Cfg] On DUT setup DHCP proxy.  |br| [Ver] Make TG verify matching DHCPv6 packets between client and  DHCPv6 server through DHCPv6 proxy.  |br| [Ref] RFC 3315  | PASS   |
+---------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

GRE Overlay Tunnels
```````````````````



eth2p-ethip4gre-ip4base-func
''''''''''''''''''''''''''''

**GREoIPv4 test cases**   

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes; TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-GRE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for routing over GRE tunnel; Eth-IPv4-ICMPv4 on TG_if1-DUT, Eth-IPv4-GRE-IPv4-ICMPv4 on TG_if2_DUT for GREoIPv4 encapsulation and decapsulation verification.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. GREoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; GREoIPv4 encapsulation and decapsulation are verified separately by TG; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC2784.

+---------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                  | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Status |
+=======================================================================================+========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route over GREoIPv4 tunnel between two TG links                   |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-GRE-IPv4-ICMPv4 on  DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure GREoIPv4 tunnel with IPv4 routes towards each other.  |br| [Ver] Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and GRE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC2784.                                                                                                                                                                                                                       | PASS   |
+---------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT encapsulates IPv4 into GREoIPv4 tunnel - GRE header verification            |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMPv4 on TG_if1-DUT,  Eth-IPv4-GRE-IPv4-ICMPv4 on TG_if2_DUT.  |br| [Cfg] On DUT1 configure GREoIPv4 tunnel with IPv4 route towards TG.  |br| [Ver] Make TG send non-encapsulated ICMPv4 Echo Req to DUT; verify TG received GREoIPv4 encapsulated packet is correct.  |br| [Ref] RFC2784.                                                                                                                                                                                                                                                                                  | PASS   |
+---------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT decapsulates IPv4 from GREoIPv4 tunnel - IPv4 header verification           |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMPv4 on TG_if1-DUT,  Eth-IPv4-GRE-IPv4-ICMPv4 on TG_if2_DUT.  |br| [Cfg] On DUT1 configure GREoIPv4 tunnel towards TG.  |br| [Ver] Make TG send ICMPv4 Echo Req encapsulated into GREoIPv4 towards VPP; verify TG received IPv4 de-encapsulated packet is correct.  |br| [Ref] RFC2784.                                                                                                                                                                                                                                                                                    | PASS   |
+---------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT encapsulates IPv4 into GREoIPv4 different tunnels - GRE header verification |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMPv4 on TG_if1-DUT,  Eth-IPv4-GRE-IPv4-ICMPv4 on TG_if2_DUT.  |br| [Cfg] On DUT1 configure two GRE tunnels with loopback's source address. Destination address of tunnels are routed via next hop address of DUT's to TG if2, where should be only GRE encapsulated packets. Each tunnel has IPv4 address and configured prefix routed through the tunnel.  |br| [Ver] Make TG send non-encapsulated ICMPv4 Echo Req to DUT; verify TG received GREoIPv4 encapsulated packet is correct for each tunnel.  |br| [Ref] RFC2784.                                              | PASS   |
+---------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT re-encapsulates IPv4 GRE into other GRE tunnel - GRE header verification    |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMPv4 on TG_if1-DUT,  Eth-IPv4-GRE-IPv4-ICMPv4 on TG_if2_DUT.  |br| [Cfg] On DUT1 configure two GRE tunnels with loopback's source address. Destination address of tunnels are routed via next hop address of DUT's to TG if2, where should be only GRE encapsulated packets. Each tunnel has IPv4 address and configured prefix routed through the tunnel.  |br| [Ver] Make TG send encapsulated IPv4 UDP to DUT; Encapsulated IP source is behind configured tunnel same as destination; verify TG received GREoIPv4 encapsulated packet is correct.  |br| [Ref] RFC2784. | PASS   |
+---------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC06: DUT do not process GRE with wrong tunnel destination IP                         |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMPv4 on TG_if1-DUT,  Eth-IPv4-GRE-IPv4-ICMPv4 on TG_if2_DUT.  |br| [Cfg] On DUT1 configure two GRE tunnels with loopback's source address. Destination address of tunnels are routed via next hop address of DUT's to TG if2, where should be only GRE encapsulated packets. On DUT's to TG if1 interface is configured test destination host MAC address.  |br| [Ver] Make TG send GRE encapsulated ICMPv4 Echo Req to DUT; verify TG received de-capsulated packet is correct, then send packet with wrong tunnel destination address.  |br| [Ref] RFC2784.              | PASS   |
+---------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

L2BD Ethernet Switching
```````````````````````



eth2p-eth-l2bdbasemaclrn-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''

**L2 bridge-domain test cases**   

 - **[Top] Network Topologies:** TG=DUT=VM 3-node topology with VM and double parallel links.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4; Eth-IPv6-ICMPv6 for L2 switching of IPv6 use. Both apply to all links.  

 - **[Cfg] DUT configuration:** DUT1 is configured with two L2 bridge-domains (L2BD) switching combined with MAC learning enabled.  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 via VM; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                         | Documentation                                                                                                                                                                                                                                                                                                                                                            | Status |
+==============================================================================+==========================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT with two L2BDs (MAC learn) switches ICMPv4 between TG and VM links |  |br| [Top] TG=DUT=VM.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure  two L2BDs with MAC learning, each with vhost-user i/f to local VM and i/f to TG; configure VM to loop pkts back betwen its two virtio i/fs.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 and VM in both directions and are correct on receive.  |br| [Ref]  | PASS   |
+------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT with two L2BDs (MAC learn) switches ICMPv6 between TG and VM links |  |br| [Top] TG=DUT=VM.  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] On DUT1 configure  two L2BDs with MAC learning, each with vhost-user i/f to local VM and i/f to TG; configure VM to loop pkts back betwen its two virtio i/fs.  |br| [Ver] Make TG verify ICMPv6 Echo Req pkts are switched thru DUT1 and VM in both directions and are correct on receive.  |br| [Ref]  | PASS   |
+------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-eth-l2bdbasemaclrn-func
'''''''''''''''''''''''''''''

**L2 bridge-domain test cases**   

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes; TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4; Eth-IPv6-ICMPv6 for L2 switching of IPv6 use. Both apply to all links.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled.  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                     | Documentation                                                                                                                                                                                                                                                                      | Status |
+==========================================================================+====================================================================================================================================================================================================================================================================================+========+
| TC01: DUT reports active interfaces                                      |  |br| [Top] TG=DUT1; TG-DUT1-DUT2-TG.  |br| [Enc] None.  |br| [Cfg] Discovered  active interfaces.  |br| [Ver] Report active interfaces on DUT.  |br| [Ref]                                                                                                                        | PASS   |
+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT with L2BD (MAC learning) switch ICMPv4 between two TG links    |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure  two i/fs into L2BD with MAC learning.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 in both directions and are correct on receive.  |br| [Ref]                           | PASS   |
+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT1 and DUT2 with L2BD (MAC learning) switch between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 and DUT2  configure two i/fs into L2BD with MAC learning.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 and DUT2 in both directions and are correct on receive.  |br| [Ref] | PASS   |
+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-eth-l2bdbasemacstc-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''

**L2 bridge-domain test cases**   

 - **[Top] Network Topologies:** TG=DUT=VM 3-node topology with VM and double parallel links.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4; Eth-IPv6-ICMPv6 for L2 switching of IPv6 use. Both apply to all links.  

 - **[Cfg] DUT configuration:** DUT1 is configured with two L2 bridge-domains (L2BD) switching combined with static MACs.  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 via VM; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                           | Status |
+================================================================================+=========================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT with two L2BDs (static MACs) switches ICMPv4 between TG and VM links |  |br| [Top] TG=DUT=VM.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure  two L2BDs with static MACs, each with vhost-user i/f to local VM and i/f to TG; configure VM to loop pkts back betwen its two virtio i/fs.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 and VM in both directions and are correct on receive.  |br| [Ref]  | PASS   |
+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT with two L2BDs (static MACs) switches ICMPv6 between TG and VM links |  |br| [Top] TG=DUT=VM.  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] On DUT1 configure  two L2BDs with static MACs, each with vhost-user i/f to local VM and i/f to TG; configure VM to loop pkts back betwen its two virtio i/fs.  |br| [Ver] Make TG verify ICMPv6 Echo Req pkts are switched thru DUT1 and VM in both directions and are correct on receive.  |br| [Ref]  | PASS   |
+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-eth-l2bdbasemacstc-func
'''''''''''''''''''''''''''''

**L2 bridge-domain test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4; Eth-IPv6-ICMPv6 for L2 switching of IPv6 use. Both apply to all links.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with static MACs.  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                    | Documentation                                                                                                                                                                                                                                                                     | Status |
+=========================================================================+===================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD (static MACs) switch between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 and  DUT2 configure two i/fs into L2BD with static MACs.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 and DUT2 in both directions and are correct on receive.  |br| [Ref] | PASS   |
+-------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth4p-eth-l2bdbasemaclrn-l2shg-func
'''''''''''''''''''''''''''''''''''

**L2 bridge-domain test cases**   

 - **[Top] Network Topologies:** TG=DUT1=DUT2=TG 3-node circular topology with double parallel links.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4; Eth-IPv6-ICMPv6 for L2 switching of IPv6 use. Both apply to all links.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled and Split Horizon Groups (SHG).  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+--------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                     | Status |
+================================================================================+===================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD (MAC learn) and SHG switch between four TG links |  |br| [Top] TG=DUT1=DUT2=TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 and  DUT2 configure four i/fs into L2BD with MAC learning and the same SHG on i/fs towards TG.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 and DUT2 in both directions and are correct on receive; verify no pkts are switched thru SHG isolated interfaces.  |br| [Ref] | PASS   |
+--------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

L2XC Ethernet Switching
```````````````````````



eth2p-eth-l2xcbase-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''

**L2 cross-connect test cases**   

 - **[Top] Network Topologies:** TG=DUT=VM 3-node topology with VM and double parallel links.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4; Eth-IPv6-ICMPv6 for L2 switching of IPv6 use. Both apply to all links.  

 - **[Cfg] DUT configuration:** DUT1 is configured with L2 cross-connect (L2XC) switching.  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 via VM; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                 | Status |
+========================================================================+===============================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT with two L2XCs switches ICMPv4 between TG and local VM links |  |br| [Top] TG=DUT=VM.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT configure  two L2 cross-connects (L2XC), each with one untagged interface to TG and untagged i/f to local VM over vhost-user.  |br| [Ver] Make TG send ICMPv4 Echo Reqs in both directions between two of its i/fs to be switched by DUT to and from VM; verify all packets are received.  |br| [Ref]  | PASS   |
+------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT with two L2XCs switches ICMPv6 between TG and local VM links |  |br| [Top] TG=DUT=VM.  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] On DUT configure  two L2 cross-connects (L2XC), each with one untagged i/f to TG and untagged i/f to local VM over vhost-user.  |br| [Ver] Make TG send ICMPv6 Echo Reqs in both directions between two of its i/fs to be switched by DUT to and from VM; verify all packets are received.  |br| [Ref]        | PASS   |
+------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-eth-l2xcbase-func
'''''''''''''''''''''''

**L2 cross-connect test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4; Eth-IPv6-ICMPv6 for L2 switching of IPv6 use. Both apply to all links.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 cross-connect (L2XC) switching.  

 - **[Ver] TG verification:** Test ICMPv4 (or ICMPv6) Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 (IPv6) src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                      | Status |
+==================================================================+====================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 and  DUT2 configure L2 cross-connect (L2XC), each with one interface to TG and one Ethernet interface towards the other DUT.  |br| [Ver] Make TG send ICMPv4 Echo Req in both directions between two of its interfaces to be switched by DUT1 and DUT2; verify all packets are received.  |br| [Ref] | PASS   |
+------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 with L2XC switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] On DUT1 and  DUT2 configure L2 cross-connect (L2XC), each with one interface to TG and one Ethernet interface towards the other DUT.  |br| [Ver] Make TG send ICMPv6 Echo Req in both directions between two of its interfaces to be switched by DUT1 and DUT2; verify all packets are received.  |br| [Ref] | PASS   |
+------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

LISP Overlay Tunnels
````````````````````



api-crud-lisp-func
''''''''''''''''''

**API test cases**   

 - **[Top] Network Topologies:** DUT1 1-node topology.  

 - **[Enc] Packet Encapsulations:** None.  

 - **[Cfg] DUT configuration:** DUT1 gets configured with all LISP parameters.  

 - **[Ver] Verification:** DUT1 operational data gets verified following configuration.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+--------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                    | Status |
+========================================================+==================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT can enable and disable LISP                  |  |br| [Top] DUT1.  |br| [Enc] None.  |br| [Cfg1] Test LISP enable/disable API; On  DUT1 enable LISP.  |br| [Ver1] Check DUT1 if LISP is enabled.  |br| [Cfg2] Then disable LISP.  |br| [Ver2] Check DUT1 if LISP is disabled.  |br| [Ref] RFC6830.                                                                                                                                                                                               | PASS   |
+--------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT can add and delete locator_set               |  |br| [Top] DUT1.  |br| [Enc] None.  |br| [Cfg1] Test LISP locator_set API; on  DUT1 configure locator_set and locator.  |br| [Ver1] Check DUT1 configured locator_set and locator are correct.  |br| [Cfg2] Then remove locator_set and locator.  |br| [Ver2] check DUT1 locator_set and locator are removed.  |br| [Ref] RFC6830.                                                                                                              | PASS   |
+--------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT can add, reset and delete locator_set        |  |br| [Top] DUT1.  |br| [Enc] None.  |br| [Cfg1] Test LISP locator_set API; on  DUT1 configure locator_set and locator.  |br| [Ver1] Check DUT1 locator_set and locator are correct.  |br| [Cfg2] Then reset locator_set and set it again.  |br| [Ver2] Check DUT1 locator_set and locator are correct.  |br| [Cfg3] Then remove locator_set and locator.  |br| [Ver3] Check DUT1 all locator_set and locators are removed.  |br| [Ref] RFC6830. | PASS   |
+--------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT can add and delete eid address               |  |br| [Top] DUT1.  |br| [Enc] None.  |br| [Cfg1] Test LISP eid API; on DUT1  configure LISP eid IP address.  |br| [Ver1] Check DUT1 configured data is correct.  |br| [Cfg2] Remove configured data.  |br| [Ver2] Check DUT1 all eid IP addresses are removed.  |br| [Ref] RFC6830.                                                                                                                                                              | PASS   |
+--------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT can add and delete LISP map resolver address |  |br| [Top] DUT1.  |br| [Enc] None.  |br| [Cfg1] Test LISP map resolver address  API; on DUT1 configure LISP map resolver address.  |br| [Ver1] Check DUT1 configured data is correct.  |br| [Cfg2] Remove configured data.  |br| [Ver2] Check DUT1 all map resolver addresses are removed.  |br| [Ref] RFC6830.                                                                                                                                 | PASS   |
+--------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4ipsectptlispgpe-ip4base-eth-2vhost-1vm-func
'''''''''''''''''''''''''''''''''''''''''''''''''''''''

**IPv4-ip4-ipsec-lispgpe-ip4 - main fib, vrf (gpe_vni-to-vrf)**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** ICMPv4-IPv4-IPSec-LISPGPE-IPv4-ICMPv4.  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 via VM to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+========================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 over Vhost to LISP GPE tunnel using IPsec (transport) on RLOC Int.      |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv4-ICMP on DUT1-DUT2, Eth-IPv4-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS. Create Qemu vm on DUT1 and configure bridge between two vhosts.  |br| [Ver] Case: ip4-ipsec-lispgpe-ip4 - main fib, virt2lisp Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303. | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv4 over Vhost to LISP GPE tunnel using IPsec (transport) on lisp_gpe0 Int. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Case: ip4-ipsec-lispgpe-ip4 - main fib, virt2lisp Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.                                                             | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4ipsectptlispgpe-ip4base-func
''''''''''''''''''''''''''''''''''''''''

**IPv4-ip4-ipsec-lispgpe-ip4 - main fib, vrf (gpe_vni-to-vrf)**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** ICMPv4-IPv4-IPSec-LISPGPE-IPv4-ICMPv4.  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                                               | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Status |
+====================================================================================================================================+==========================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) on RLOC Int.                           |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTs.  |br| [Ver] Case: ip4-lispgpe-ipsec-ip4 - main fib Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.       | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) lisp_gpe0 Int.                         |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTs.  |br| [Ver] Case: ip4-ipsec-lispgpe-ip4 - main fib Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.       | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) on RLOC Int and VRF on EID is enabled. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTs.  |br| [Ver] Case: ip4-lispgpe-ipsec-ip4 - vrf, main fib Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.  | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) on lisp_gpe0 Int and VRF is enabled.   |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTs.  |br| [Ver] Case: ip4-ipsec-lispgpe-ip4 - vrf, main fib Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.  | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4ipsectptlispgpe-ip6base-eth-2vhost-1vm-func
'''''''''''''''''''''''''''''''''''''''''''''''''''''''

**IPv6 - ip4-ipsec-lispgpe-ip6 - main fib, vrf, virt2lisp, phy2lisp**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISPGPE-IPSec-IPv6-ICMP, Eth-IPv4-IPSec-LISPGPE-IPv6-ICMP  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 via VM to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+========================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 over Vhost to LISP GPE tunnel using IPsec (transport) on RLOC Int.      |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPSec-IPv6-ICMP on DUT1-DUT2, Eth-IPv6-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS. Create Qemu vm on DUT1 and configure bridge between two vhosts.  |br| [Ver] Case: ip4-ipsec-lispgpe-ip6 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303. | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv6 over Vhost to LISP GPE tunnel using IPsec (transport) on lisp_gpe0 Int. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6, on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Case: ip4-ipsec-lispgpe-ip6 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.                                                            | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4ipsectptlispgpe-ip6base-func
''''''''''''''''''''''''''''''''''''''''

**IPv6 - ip4-ipsec-lispgpe-ip6 - main fib, vrf, virt2lisp, phy2lisp**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISPGPE-IPSec-IPv6-ICMP, Eth-IPv4-IPSec-LISPGPE-IPv6-ICMP  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+---------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                          | Documentation                                                                                                                                                                                                                                                                                                                                                                                                              | Status |
+===============================================================================================================+============================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) on RLOC Int.      |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPSec-IPv6-ICMP on DUT1-DUT2, Eth-IPv6-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.    | PASS   |
+---------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) on lisp_gpe0 Int. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.  | PASS   |
+---------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4ipsectptlispgpe-ip6basevrf-func
'''''''''''''''''''''''''''''''''''''''''''

**IPv6 - ip4-ipsec-lispgpe-ip6 - main fib, vrf, virt2lisp, phy2lisp**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISPGPE-IPSec-IPv6-ICMP, Eth-IPv4-IPSec-LISPGPE-IPv6-ICMP  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+==================================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using physical interfaces and VRF is enabled |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-IPSec-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6, on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Case: ip4-ipsec-lispgpe-ip6 - vrf, phy2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.  | PASS   |
+------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lisp-ip4base-func
'''''''''''''''''''''''''''''

**IP AFI independent functional tests.**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for IPv4 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+---------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                      | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Status |
+===========================================================================+====================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 over LISPoIPv4 tunnel after disable-enable |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg1] On DUT1 and DUT2 configure IPv4 LISP static adjacencies.  |br| [Ver1] Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Cfg2] Disable LISP.  |br| [Ver2] Verify packets are not received via LISP tunnel.  |br| [Cfg3] Re-enable LISP.  |br| [Ver3] Verify packets are received again via LISP tunnel.  |br| [Ref] RFC6830. | PASS   |
+---------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lisp-l2bdbasemaclrn-func
''''''''''''''''''''''''''''''''''''

**ip4-lispgpe-ip4 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4-LISPGpe-IP4  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                           | Status |
+================================================================+=========================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: Route IPv4 packet through LISP with Bridge Domain setup. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-ICMPv4-LISPGpe-IP4  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2. Also configure BD and assign it to LISP VNI.  |br| [Ver] Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP tunnel between them; verify IPv4, Ether headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lispgpe-ip4base-eth-2vhost-1vm-func
'''''''''''''''''''''''''''''''''''''''''''''''

**ip4-lispgpe-ip4 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for IPv4 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+--------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                       | Documentation                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+============================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using vhost interfaces |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip4-lispgpe-ip4 - main fib, virt2lisp Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  | PASS   |
+--------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lispgpe-ip4base-func
''''''''''''''''''''''''''''''''

**ip4-lispgpe-ip4 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for IPv4 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+-----------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                          | Documentation                                                                                                                                                                                                                                                                                                                                                                                                       | Status |
+===============================================================================================+=====================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using physical interfaces |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip4-lispgpe-ip4 - phy2lisp Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+-----------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lispgpe-ip4basevrf-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''''''''

**ip4-lispgpe-ip4 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for IPv4 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+---------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                          | Documentation                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+===============================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using vhost interfaces and VRF is enabled |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip4-lispgpe-ip4 - vrf, virt2lisp Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+---------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lispgpe-ip4basevrf-func
'''''''''''''''''''''''''''''''''''

**ip4-lispgpe-ip4 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for IPv4 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                                                            | Status |
+==================================================================================================================+==========================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using physical interfaces and VRF is enabled |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip4-lispgpe-ip4 - vrf, phy2lisp Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lispgpe-ip6base-eth-2vhost-1vm-func
'''''''''''''''''''''''''''''''''''''''''''''''

**LISP static adjacency test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for IPv6 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv6 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+--------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                       | Documentation                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+============================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using vhost interfaces |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip6-lispgpe-ip4 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  | PASS   |
+--------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lispgpe-ip6base-func
''''''''''''''''''''''''''''''''

**LISP static adjacency test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for IPv6 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv6 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+----------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                 | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Status |
+======================================================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISPoIPv4 tunnel |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure IPv4 LISP static adjacencies.  |br| [Ver] Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Cfg2] Reconf LISP.  |br| [Ver2] Verify packets are received again via LISP tunnel.  |br| [Ref] RFC6830. | PASS   |
+----------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4lispgpe-ip6basevrf-func
'''''''''''''''''''''''''''''''''''

**LISP static adjacency test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for IPv6 routing over LISPoIPv4 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv6 routing and static routes. LISPoIPv4 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                                                            | Status |
+==================================================================================================================+==========================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using physical interfaces and VRF is enabled |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv4 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip6-lispgpe-ip4 - vrf, phy2lisp Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6ipsectptlispgpe-ip4base-eth-2vhost-1vm-func
'''''''''''''''''''''''''''''''''''''''''''''''''''''''

**IPv6 - ip4-ipsec-lispgpe-ip6 - main fib, virt2lisp, phy2lisp**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-LISPGPE-IPSec-IPv4-ICMP, Eth-IPv6-IPSec-LISPGPE-IPv4-ICMP  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Test cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+========================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 over Vhost to LISP GPE tunnel using IPsec (transport) on RLOC Int.      |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-LISPGPE-IPSec-IPv4-ICMP on DUT1-DUT2, Eth-IPv4-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS. Create Qemu vm on DUT1 and configure bridge between two vhosts.  |br| [Ver] Case: ip6-ipsec-lispgpe-ip4 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303. | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv4 over Vhost to LISP GPE tunnel using IPsec (transport) on lisp_gpe0 Int. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-IPSec-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6, on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Case: ip6-ipsec-lispgpe-ip4 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.                                                            | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6ipsectptlispgpe-ip4base-func
''''''''''''''''''''''''''''''''''''''''

**IPv6 - ip4-ipsec-lispgpe-ip6 - main fib, virt2lisp, phy2lisp**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-LISPGPE-IPSec-IPv4-ICMP, Eth-IPv6-IPSec-LISPGPE-IPv4-ICMP  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+---------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                          | Documentation                                                                                                                                                                                                                                                                                                                                                                                                              | Status |
+===============================================================================================================+============================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) on RLOC Int.      |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-LISPGPE-IPSec-IPv4-ICMP on DUT1-DUT2, Eth-IPv4-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.    | PASS   |
+---------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv4 bidirectionally over LISP GPE tunnel using IPsec (transport) on lisp_gpe0 Int. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-IPSec-LISPGPE-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.  | PASS   |
+---------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6ipsectptlispgpe-ip6base-eth-2vhost-1vm-func
'''''''''''''''''''''''''''''''''''''''''''''''''''''''

**IPv6 - ip6-ipsec-lispgpe-ip6 - main fib, vrf (gpe_vni-to-vrf), phy2lisp, virt2lisp**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-IPSec-LISPGPE-IPv6-ICMPv6,  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 via VM to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+========================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 over Vhost to LISP GPE tunnel using IPsec (transport) on RLOC Int.      |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-IPSec-LISPGPE-IPv6-ICMP on DUT1-DUT2, Eth-IPv6-ICMP on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS. Create Qemu vm on DUT1 and configure bridge between two vhosts.  |br| [Ver] Case: ip6-ipsec-lispgpe-ip6 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303. | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv6 over Vhost to LISP GPE tunnel using IPsec (transport) on lisp_gpe0 Int. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-IPSec-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Case: ip6-ipsec-lispgpe-ip6 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.                                                             | PASS   |
+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6ipsectptlispgpe-ip6base-func
''''''''''''''''''''''''''''''''''''''''

**IPv6 - ip6-ipsec-lispgpe-ip6 - main fib, vrf (gpe_vni-to-vrf), phy2lisp, virt2lisp**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-IPSec-LISPGPE-IPv6-ICMPv6,  

 - **[Cfg] DUT configuration:** Each DUT is configured with LISP and IPsec. IPsec is in transport mode. Tests cases are for IPsec configured both on RLOC interface or lisp_gpe0 interface.  

 - **[Ver] TG verification:** Packet is send from TG(if1) across the DUT1 to DUT2 where it is forwarded to TG(if2).  

 - **[Ref] Applicable standard specifications:** RFC6830, RFC4303.

+------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                       | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Status |
+============================================================================================================+================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using IPsec (transport) on RLOC Int.   |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-IPSec-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Case: ip6-lispgpe-ipsec-ip6 - main fib, phys2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.  | PASS   |
+------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using IPsec (transport) lisp_gpe0 Int. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-IPSec-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2 with IPsec in between DUTS.  |br| [Ver] Case: ip6-ipsec-lispgpe-ip6 - main fib, phys2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830, RFC4303.  | PASS   |
+------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6lisp-l2bdbasemaclrn-func
''''''''''''''''''''''''''''''''''''

**l2-lispgpe-ip6 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IP6-ICMPv6-LISPGpe-IP6  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge domains and neighbors. LISPoIPv6 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+----------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                          | Status |
+================================================================+========================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: Route IPv6 packet through LISP with Bridge Domain setup. |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IP6-ICMPv6-LISPGpe-IP6  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2. Also configure BD and assign it to LISP VNI.  |br| [Ver] Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP tunnel between them; verify IPv6, Ether headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+----------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6lispgpe-ip4base-func
''''''''''''''''''''''''''''''''

**LISP static adjacency test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for IPv4 routing over LISPoIPv6 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv4 routing and static routes. LISPoIPv6 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+----------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                 | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Status |
+======================================================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv4 bidirectionally over LISPoIPv6 tunnel |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-LISP-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure IPv6 LISP static adjacencies.  |br| [Ver] Make TG send ICMPv4 Echo Req between its interfaces across both DUTs and LISP tunnel between them; verify IPv4 headers on received packets are correct.  |br| [Cfg2] Reconf LISP.  |br| [Ver2] Verify packets are received again via LISP tunnel.  |br| [Ref] RFC6830. | PASS   |
+----------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6lispgpe-ip6base-eth-2vhost-1vm-func
'''''''''''''''''''''''''''''''''''''''''''''''

**ip6-lispgpe-ip6 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for IPv6 routing over LISPoIPv6 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv6 routing and static routes. LISPoIPv6 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+--------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                       | Documentation                                                                                                                                                                                                                                                                                                                                                                                                   | Status |
+============================================================================================+=================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using vhost interfaces |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip6-ipsec-lispgpe-ip6 - main fib, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  | PASS   |
+--------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6lispgpe-ip6base-func
''''''''''''''''''''''''''''''''

**ip6-lispgpe-ip6 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for IPv6 routing over LISPoIPv6 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv6 routing and static routes. LISPoIPv6 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+-----------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                          | Documentation                                                                                                                                                                                                                                                                                                                                                                                                       | Status |
+===============================================================================================+=====================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using physical interfaces |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip6-lispgpe-ip6 - phy2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+-----------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6lispgpe-ip6basevrf-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''''''''

**ip6-lispgpe-ip6 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for IPv6 routing over LISPoIPv6 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv6 routing and static routes. LISPoIPv6 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+---------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                          | Documentation                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+===============================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using vhost interfaces and VRF is enabled |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip6-lispgpe-ip6 - vrf, virt2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+---------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6lispgpe-ip6basevrf-func
'''''''''''''''''''''''''''''''''''

**ip6-lispgpe-ip6 encapsulation test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-LISP-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for IPv6 routing over LISPoIPv6 tunnel.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with IPv6 routing and static routes. LISPoIPv6 tunnel is configured between DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC6830.

+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                                                            | Status |
+==================================================================================================================+==========================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 route IPv6 bidirectionally over LISP GPE tunnel using physical interfaces and VRF is enabled |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-LISPGPE-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] Configure IPv6 LISP static adjacencies on DUT1 and DUT2.  |br| [Ver] Case: ip6-lispgpe-ip6 - vrf, phy2lisp Make TG send ICMPv6 Echo Req between its interfaces across both DUTs and LISP GPE tunnel between them; verify IPv6 headers on received packets are correct.  |br| [Ref] RFC6830.  | PASS   |
+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

Softwire Tunnels
````````````````



eth2p-ethip4--ethip6ip4-ip4base--ip6base-swirelw46-func
'''''''''''''''''''''''''''''''''''''''''''''''''''''''

**Lightweight 4 over 6 test cases**  LW4o6 is a subset of MAP-E, with per-subscriber rules. It uses the same tunneling mechanism and configuration as MAP-E. It does not use embedded address bits.   

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-UDP on TG_if1-DUT, Eth-IPv6-IPv4-UDP on TG_if2_DUT.  

 - **[Cfg] DUT configuration:** DUT1 is configured as lwAFTR.  

 - **[Ver] TG verification:** Test UDP ICMP Echo Request in IPv4 are sent to lwAFTR and are verified by TG for correctness their encapsulation in IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7596 RFC7597.

+----------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                     | Status |
+==================================================================================+===================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: Encapsulate IPv4 into IPv6. IPv6 dst depends on IPv4 and UDP destination   |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-UDP on TG_if1-DUT, Eth-IPv6-IPv4-UDP on TG_if2_DUT.  |br| [Cfg] On DUT1 configure Map domain and Map rule.  |br| [Ver] Make TG send non-encapsulated UDP to DUT; verify TG received IPv4oIPv6 encapsulated packet is correct.  |br| [Ref] RFC7596 RFC7597                                                                               | PASS   |
+----------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: Encapsulate IPv4 ICMP into IPv6. IPv6 dst depends on IPv4 addr and ICMP ID |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMP(type 0 and 8) on TG_if1-DUT, Eth-IPv6-IPv4-ICMP on TG_if2_DUT.  |br| [Cfg] On DUT1 configure Map domain and Map rule.  |br| [Ver] Make TG send non-encapsulated ICMP to DUT; verify TG received IPv4oIPv6 encapsulated packet is correct. Checks IPv6 destination based on ICMP Identifier field.  |br| [Ref] RFC7596 section 8.1  | PASS   |
+----------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: Decapsulate IPv4 UDP from IPv6.                                            |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv6-IPv4-UDP on TG_if2_DUT, Eth-IPv4-UDP on TG_if1-DUT.  |br| [Cfg] On DUT1 configure Map domain and Map rule.  |br| [Ver] Make TG send encapsulated UDP to DUT; verify TG received IPv4 non-encapsulated packet is correct.  |br| [Ref] RFC7596 RFC7597                                                                                    | PASS   |
+----------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: Hairpinning of traffic between two lwB4                                    |  |br| [Top] DUT1-TG.  |br| [Enc] Eth-IPv6-IPv4-UDP on TG_if2_DUT, Eth-IPv6-IPv4-UDP on TG_if2_DUT.  |br| [Cfg] On DUT1 configure Map domain and two Map rules.  |br| [Ver] Make TG send encapsulated UDP to DUT; verify TG received encapsulated packet is correct.  |br| [Ref] RFC7596 RFC7597                                                                                   | PASS   |
+----------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4--ethip6ip4-ip4base--ip6base-swiremape-func
'''''''''''''''''''''''''''''''''''''''''''''''''''''''

**Test for Basic mapping rule for MAP-E**  

 - **[Top] Network Topologies:** TG - DUT1 - TG with two links between the nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-UDP on TG-to-DUT-if1. Eth-IPv6-IPv4-UDP on TG-to-DUT-if2.  

 - **[Cfg] DUT configuration:** DUT is configured with IPv4 on one DUT-to-TG interface and IPv6 address on second DUT-to-TG interface. MAP-E domain is configured in test template based on test parameters.  

 - **[Ver] TG verification:** UDP packets in IPv4 are sent by TG to destination in MAP domain. IPv6 packets with encapsulated IPv4 are received on TG interface.  

 - **[Ref] Applicable standard specifications:** RFC7597.

+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                                            | Status |
+==================================================================================+==========================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: BMR, then an IPv4 prefix is assigned                                       | Basic Mapping Rule https://tools.ietf.org/html/rfc7597#section-5.2 IPv4 prefix length + ea bits length < 32 (o + r < 32) psid_length = 0, ip6_prefix < 64, ip4_prefix <= 32                                                                                                                                                                                                                              | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: BMR, full IPv4 address is to be assigned                                   | Basic Mapping Rule https://tools.ietf.org/html/rfc7597#section-5.2 IPv4 prefix length + ea bits length == 32 (o + r == 32) psid_length = 0, ip6_prefix < 64, ip4_prefix <= 32                                                                                                                                                                                                                            | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: BMR, shared IPv4 address is to be assigned                                 | Basic Mapping Rule https://tools.ietf.org/html/rfc7597#section-5.2 IPv4 prefix length + ea bits length > 32 (o + r > 32) ip6_prefix < 64, ip4_prefix <= 32                                                                                                                                                                                                                                               | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: End user IPv6 prefix is 64                                                 | Supported End-User IPv6 prefix length is 64 bit.                                                                                                                                                                                                                                                                                                                                                         | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: IPv4 prefix is 0                                                           |                                                                                                                                                                                                                                                                                                                                                                                                          | FAIL   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC06: Multiple domain and check with traffic script IPv4 source IPv6 destination |  |br| [Top] TG=DUT1.  |br| [Cfg] Multiple MAP-E domains are configured, values from variable file.  |br| [Ver] Send IPv4 to destination in configured domain and receive IPv6 packet.  |br| [Ref] RFC7597.                                                                                                                                                                                               | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC07: Multiple domain and check with traffic script IPv6 source IPv6 destination |  |br| [Top] TG=DUT1.  |br| [Cfg] Multiple MAP-E domains are configured, values from variable file.  |br| [Ver] Send IPv4 encapsulated in IPv6. Source and destination are from configured domains. Check if VPP translate IPv6 addresses.  |br| [Ref] RFC7597.                                                                                                                                           | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC08: Encapsulate IPv4 ICMP into IPv6                                            |  |br| [Top] TG=DUT1.  |br| [Enc] Eth-IPv4-ICMP(type 0 and 8) on TG_if1-DUT, Eth-IPv6-IPv4-ICMP on TG_if2_DUT.  |br| [Cfg] Multiple MAP-E domains are configured, values from variable file.  |br| [Ver] Make TG send non-encapsulated ICMP to DUT; verify TG received IPv4oIPv6 encapsulated packet is correct. Checks IPv6 destination based on ICMP Identifier field.  |br| [Ref] RFC7597 section 8.2. | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC09: Repeated ip neighbor command doesnt put FIB to broken state                | Original issue described in https://jira.fd.io/browse/VPP-312.  |br| [Top] TG=DUT1.  |br| [Cfg] IP address are set on interfaces, ip neighbor multiple times  |br| [Ver] FIB is not in broken state. The steps are add route,  check with traffic then add same route again and check with traffic script.                                                                                               | PASS   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Bug: VPP-318                                                                     | qlen < psid length                                                                                                                                                                                                                                                                                                                                                                                       | FAIL   |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4--ethip6ip4-ip4base--ip6base-swiremapt-func
'''''''''''''''''''''''''''''''''''''''''''''''''''''''

**Test for Basic mapping rule for MAP-T**  

 - **[Top] Network Topologies:** TG - DUT1 - TG with two links between the nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-UDP on TG-to-DUT-if1. Eth-IPv6-UDP on TG-to-DUT-if2.  

 - **[Cfg] DUT configuration:** DUT is configured with IPv4 on one DUT-to-TG interface and IPv6 address on second DUT-to-TG interface. MAP-T domain is configured in test template based on test parameters.  

 - **[Ver] TG verification:** UDP packets in IPv4 are sent by TG to destination in MAP domain. IPv6 packets with translated IPv4 addresses are received on TG interface.  

 - **[Ref] Applicable standard specifications:** RFC7599

+------------------+------------------------------------------+--------+
| Name             | Documentation                            | Status |
+==================+==========================================+========+
| TC01: MAP-T test | Test to check map-t address translation. | PASS   |
+------------------+------------------------------------------+--------+

Cop Address Security
````````````````````



eth2p-ethip4-ip4base-copblklistbase-func
''''''''''''''''''''''''''''''''''''''''

**COP Security IPv4 Blacklist Tests**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 on all links.  

 - **[Cfg] DUT configuration:** DUT1 is configured with IPv4 routing and static routes. COP security black-lists are applied on DUT1 ingress interface from TG. DUT2 is configured with L2XC.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in one direction by TG on link to DUT1; on receive TG verifies packets for correctness and drops as applicable.  

 - **[Ref] Applicable standard specifications:**

+---------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                 | Status |
+=====================================================================+===============================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT drops IPv4 pkts with COP blacklist set with IPv4 src-addr |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1  configure interface IPv4 addresses and routes in the main routing domain, add COP blacklist on interface to TG with IPv4 src-addr matching packets generated by TG; on DUT2 configure L2 xconnect.  |br| [Ver] Make TG send ICMPv4 Echo Req on its interface to DUT1; verify no ICMPv4 Echo Req pkts are received.  |br| [Ref] | PASS   |
+---------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-copwhlistbase-func
'''''''''''''''''''''''''''''''''''''''

**COP Security IPv4 Whitelist Tests**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 on all links.  

 - **[Cfg] DUT configuration:** DUT1 is configured with IPv4 routing and static routes. COP security white-lists are applied on DUT1 ingress interface from TG. DUT2 is configured with L2XC.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in one direction by TG on link to DUT1; on receive TG verifies packets for correctness and drops as applicable.  

 - **[Ref] Applicable standard specifications:**

+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                  | Documentation                                                                                                                                                                                                                                                                                                                                                                                                      | Status |
+=======================================================================+====================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT permits IPv4 pkts with COP whitelist set with IPv4 src-addr |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1  configure interface IPv4 addresses and routes in the main routing domain, add COP whitelist on interface to TG with IPv4 src-addr matching packets generated by TG; on DUT2 configure L2 xconnect.  |br| [Ver] Make TG send ICMPv4 Echo Req on its interface to DUT1; verify received ICMPv4 Echo Req pkts are correct.  |br| [Ref] | PASS   |
+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-copblklistbase-func
''''''''''''''''''''''''''''''''''''''''

**COP Security IPv6 Blacklist Tests**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-ICMPv6 on all links.  

 - **[Cfg] DUT configuration:** DUT1 is configured with IPv6 routing and static routes. COP security black-lists are applied on DUT1 ingress interface from TG. DUT2 is configured with L2XC.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in one direction by TG on link to DUT1; on receive TG verifies packets for correctness and drops as applicable.  

 - **[Ref] Applicable standard specifications:**

+---------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                 | Status |
+=====================================================================+===============================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT drops IPv6 pkts with COP blacklist set with IPv6 src-addr |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] On DUT1  configure interface IPv6 addresses and routes in the main routing domain, add COP blacklist on interface to TG with IPv6 src-addr matching packets generated by TG; on DUT2 configure L2 xconnect.  |br| [Ver] Make TG send ICMPv6 Echo Req on its interface to DUT1; verify no ICMPv6 Echo Req pkts are received.  |br| [Ref] | PASS   |
+---------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-copwhlistbase-func
'''''''''''''''''''''''''''''''''''''''

**COP Security IPv6 Whitelist Tests**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-ICMPv6 on all links.  

 - **[Cfg] DUT configuration:** DUT1 is configured with IPv6 routing and static routes. COP security white-lists are applied on DUT1 ingress interface from TG. DUT2 is configured with L2XC.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in one direction by TG on link to DUT1; on receive TG verifies packets for correctness and drops as applicable.  

 - **[Ref] Applicable standard specifications:**

+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                  | Documentation                                                                                                                                                                                                                                                                                                                                                                                                      | Status |
+=======================================================================+====================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT permits IPv6 pkts with COP whitelist set with IPv6 src-addr |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] On DUT1  configure interface IPv6 addresses and routes in the main routing domain, add COP whitelist on interface to TG with IPv6 src-addr matching packets generated by TG; on DUT2 configure L2 xconnect.  |br| [Ver] Make TG send ICMPv6 Echo Req on its interface to DUT1; verify received ICMPv6 Echo Req pkts are correct.  |br| [Ref] | PASS   |
+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

IPSec - Tunnels and Transport
`````````````````````````````



eth2p-ethip4ipsectnl-ip4base-func
'''''''''''''''''''''''''''''''''

**IPv4 IPsec tunnel mode test suite.**   

 - **[Top] Network topologies:** TG-DUT1 2-node topology with one link between nodes.  

 - **[Cfg] DUT configuration:** On DUT1 create loopback interface, configure loopback an physical interface IPv4 addresses, static ARP record, route and IPsec manual keyed connection in tunnel mode.  

 - **[Ver] TG verification:** ESP packet is sent from TG to DUT1. ESP packet is received on TG from DUT1.  

 - **[Ref] Applicable standard specifications:** RFC4303.

+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Status |
+========================================================================================================================================================================+================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity                                                                          |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                                   | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: VPP process ESP packet in Tunnel Mode with AES-CBC-192 encryption and SHA-256-128 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-192 and integrity algorithm SHA-256-128 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC09: VPP process ESP packet in Tunnel Mode with AES-CBC-256 encryption and SHA-384-192 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-384-192 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC12: VPP process ESP packet in Tunnel Mode with AES-CBC-256 encryption and SHA-512-256 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-512-256 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC13: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption alogrithms used                                   |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                       | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC14: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity - different integrity alogrithms used                                    |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                     | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC15: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption and integrity alogrithms used                     |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                     | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC16: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send and receive ESP packet between TG and VPP node before and after SA keys update.                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC17: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption alogrithms used               |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                   | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC18: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different integrity alogrithms used                |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                 | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC19: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption and integrity alogrithms used |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update. | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4ipsectpt-ip4base-func
'''''''''''''''''''''''''''''''''

**IPv4 IPsec transport mode test suite.**   

 - **[Top] Network topologies:** TG-DUT1 2-node topology with one link between nodes.  

 - **[Cfg] DUT configuration:** On DUT1 create loopback interface, configure loopback an physical interface IPv4 addresses, static ARP record, route and IPsec manual keyed connection in transport mode.  

 - **[Ver] TG verification:** ESP packet is sent from TG to DUT1. ESP packet is received on TG from DUT1.  

 - **[Ref] Applicable standard specifications:** RFC4303.

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                                                                                      | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Status |
+===========================================================================================================================================================================+===================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity                                                                          |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                                   | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: VPP process ESP packet in Transport Mode with AES-CBC-192 encryption and SHA-256-128 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-192 and integrity algorithm SHA-256-128 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC09: VPP process ESP packet in Transport Mode with AES-CBC-256 encryption and SHA-384-192 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-384-192 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC12: VPP process ESP packet in Transport Mode with AES-CBC-256 encryption and SHA-512-256 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-512-256 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC13: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption alogrithms used                                   |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                       | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC14: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity - different integrity alogrithms used                                    |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                     | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC15: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption and integrity alogrithms used                     |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                     | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC16: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send and receive ESP packet between TG and VPP node before and after SA keys update.                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC17: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption alogrithms used               |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                   | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC18: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different integrity alogrithms used                |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                 | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC19: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption and integrity alogrithms used |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update. | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6ipsectnl-ip6base-func
'''''''''''''''''''''''''''''''''

**IPv6 IPsec tunnel mode test suite.**   

 - **[Top] Network topologies:** TG-DUT1 2-node topology with one link between nodes.  

 - **[Cfg] DUT configuration:** On DUT1 create loopback interface, configure loopback an physical interface IPv6 addresses, static ARP record, route and IPsec manual keyed connection in tunnel mode.  

 - **[Ver] TG verification:** ESP packet is sent from TG to DUT1. ESP packet is received on TG from DUT1.  

 - **[Ref] Applicable standard specifications:** RFC4303.

+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Status |
+========================================================================================================================================================================+================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity                                                                          |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                                   | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: VPP process ESP packet in Tunnel Mode with AES-CBC-192 encryption and SHA-256-128 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-192 and integrity algorithm SHA-256-128 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC09: VPP process ESP packet in Tunnel Mode with AES-CBC-256 encryption and SHA-384-192 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-384-192 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC12: VPP process ESP packet in Tunnel Mode with AES-CBC-256 encryption and SHA-512-256 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-512-256 in tunnel mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC13: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption alogrithms used                                   |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                       | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC14: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity - different integrity alogrithms used                                    |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                     | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC15: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption and integrity alogrithms used                     |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                     | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC16: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send and receive ESP packet between TG and VPP node before and after SA keys update.                                                                                                                                                               | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC17: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption alogrithms used               |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                   | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC18: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different integrity alogrithms used                |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                 | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC19: VPP process ESP packet in Tunnel Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption and integrity alogrithms used |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in tunnel mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update. | PASS   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6ipsectpt-ip6base-func
'''''''''''''''''''''''''''''''''

**IPv6 IPsec transport mode test suite.**   

 - **[Top] Network topologies:** TG-DUT1 2-node topology with one link between nodes.  

 - **[Cfg] DUT configuration:** On DUT1 create loopback interface, configure loopback an physical interface IPv6 addresses, static ARP record, route and IPsec manual keyed connection in transport mode.  

 - **[Ver] TG verification:** ESP packet is sent from TG to DUT1. ESP packet is received on TG from DUT1.  

 - **[Ref] Applicable standard specifications:** RFC4303.

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                                                                                      | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Status |
+===========================================================================================================================================================================+===================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity                                                                          |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                                   | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: VPP process ESP packet in Transport Mode with AES-CBC-192 encryption and SHA-256-128 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-192 and integrity algorithm SHA-256-128 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC09: VPP process ESP packet in Transport Mode with AES-CBC-256 encryption and SHA-384-192 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-384-192 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC12: VPP process ESP packet in Transport Mode with AES-CBC-256 encryption and SHA-512-256 integrity                                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-256 and integrity algorithm SHA-512-256 in transport mode.  |br| [Ver] Send and receive ESP packet between TG and VPP node.                                                                                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC13: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption alogrithms used                                   |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                       | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC14: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity - different integrity alogrithms used                                    |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                                                                     | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC15: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity - different encryption and integrity alogrithms used                     |  |br| [Top] TG-DUT1.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG.  |br| [Ref] RFC4303.                                                                     | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC16: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys                                                      |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send and receive ESP packet between TG and VPP node before and after SA keys update.                                                                                                                                                               | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC17: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption alogrithms used               |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet encrypted by encryption key different from encryption key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                   | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC18: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different integrity alogrithms used                |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key different from integrity key stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update.                                                 | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC19: VPP process ESP packet in Transport Mode with AES-CBC-128 encryption and SHA1-96 integrity with update SA keys - different encryption and integrity alogrithms used |  |br| [Top] TG-DUT1.  |br| [Ref] RFC4303.  |br| [Cfg] On DUT1 configure IPsec manual keyed connection with encryption algorithm AES-CBC-128 and integrity algorithm SHA1-96 in transport mode. Then update SA keys - use new keys.  |br| [Ver] Send an ESP packet authenticated by integrity key and encrypted by encryption key different from integrity and encryption keys stored on VPP node from TG to VPP node and expect no response to be received on TG before and after SA keys update. | PASS   |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

IPv6 Routed-Forwarding
``````````````````````



eth2p-ethip6-ip6base-func
'''''''''''''''''''''''''

**IPv6 routing test cases**  RFC2460 IPv6, RFC4443 ICMPv6, RFC4861 Neighbor Discovery. Encapsulations: Eth-IPv6-ICMPv6 on links TG-DUT1, TG-DUT2, DUT1-DUT2; Eth-IPv6-NS/NA on links TG-DUT. IPv6 routing tests use circular 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 and DUT2 are configured with IPv6 routing and static routes. Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2 and received on TG links on the other side of circular topology. On receive TG verifies packets IPv6 src-addr, dst-addr and MAC addresses.

+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                    | Documentation                                                                                                                                                                             | Status |
+=========================================================================+===========================================================================================================================================================================================+========+
| TC01: DUT replies to ICMPv6 Echo Req to its ingress interface           | Make TG send ICMPv6 Echo Req to DUT ingress interface. Make TG verify ICMPv6 Echo Reply is correct.                                                                                       | PASS   |
+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT replies to ICMPv6 Echo Req pkt with size 64B-to-1500B-incr-1B | Make TG send ICMPv6 Echo Reqs to DUT ingress interface, incrementating frame size from 64B to 1500B with increment step of 1Byte. Make TG verify ICMP Echo Replies are correct.           | PASS   |
+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT routes to its egress interface                                | Make TG send ICMPv6 Echo Req towards DUT1 egress interface connected to DUT2. Make TG verify ICMPv6 Echo Reply is correct.                                                                | PASS   |
+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT1 routes to DUT2 ingress interface                             | Make TG send ICMPv6 Echo Req towards DUT2 ingress interface connected to DUT1. Make TG verify ICMPv6 Echo Reply is correct.                                                               | PASS   |
+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC06: DUT1 routes to DUT2 egress interface                              | Make TG send ICMPv6 Echo Req towards DUT2 egress interface connected to TG. Make TG verify ICMPv6 Echo Reply is correct.                                                                  | PASS   |
+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC07: DUT1 and DUT2 route between TG interfaces                         | Make TG send ICMPv6 Echo Req between its interfaces across DUT1 and DUT2. Make TG verify ICMPv6 Echo Replies are correct.                                                                 | PASS   |
+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC08: DUT replies to IPv6 Neighbor Solicitation                         | On DUT configure interface IPv6 address in the main routing domain. Make TG send Neighbor Solicitation message on the link to DUT and verify DUT Neighbor Advertisement reply is correct. | PASS   |
+-------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ip6ecmp-func
'''''''''''''''''''''''''''''''''

**Ipv6 Multipath routing test cases**   

 - **[Top] Network topologies:** TG=DUT 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** On DUT configure interfaces IPv4 adresses, and multipath routing.  

 - **[Ver] TG verification:** Test packets are sent from TG on the first link to DUT. Packet is received on TG on the second link from DUT1.

+-----------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                    | Documentation                                                                                                                                                                                                                               | Status |
+=========================================+=============================================================================================================================================================================================================================================+========+
| TC01: IPv6 Equal-cost multipath routing |  |br| [Top] TG=DUT  |br| [Cfg] On DUT configure multipath routing wiht two equal-cost paths.  |br| [Ver] TG sends 100 IPv6 ICMP packets traffic on the first link to DUT. On second link to TG verify if traffic is divided into two paths. | PASS   |
+-----------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ip6ra-func
'''''''''''''''''''''''''''''''

**IPv6 Router Advertisement test cases**  RFC4861 Neighbor Discovery. Encapsulations: Eth-IPv6-RA on links TG-DUT1. IPv6 Router Advertisement tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 and DUT2 are configured with IPv6 routing and static routes. TG verifies received RA packets.

+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                           | Documentation                                                                                                                                                                                                                                                                                                 | Status |
+================================================================================+===============================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT transmits RA on IPv6 enabled interface                               |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPv6 interface on the link to TG.  |br| [Ver] Make TG wait for IPv6 Router Advertisement packet to be sent by DUT1 and verify the received RA packet is correct.                                                                                   | PASS   |
+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT retransmits RA on IPv6 enabled interface after a set interval        |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPv6 interface on the link to TG.  |br| [Ver] Make TG wait for two IPv6 Router Advertisement packets to be sent by DUT1 and verify the received RA packets are correct.                                                                            | PASS   |
+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT responds to Router Solicitation request                              |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPv6 interface on the link to TG and suppress sending of Router Advertisement packets periodically.  |br| [Ver] Make TG send IPv6 Router Solicitation request to DUT1, listen for response from DUT1 and verify the received RA packet is correct. | FAIL   |
+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT responds to Router Solicitation request sent from link local address |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPv6 interface on the link to TG and suppress sending of Router Advertisement packets periodically.  |br| [Ver] Make TG send IPv6 Router Solicitation request to DUT1, listen for response from DUT1 and verify the received RA packet is correct. | FAIL   |
+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

RPF Source Security
```````````````````



eth2p-ethip4-ip4base-rpf-func
'''''''''''''''''''''''''''''

**Source RPF check on IPv4 test cases**   

 - **[Top] Network Topologies:** TG - DUT1 - DUT2 - TG with one link between the nodes.  

 - **[Cfg] DUT configuration:** DUT2 is configured with L2 Cross connect. DUT1 is configured with IP source check on link to TG,  

 - **[Ver] TG verification:** Test ICMP Echo Request packets are sent in one direction by TG on link to DUT1 and received on TG link to DUT2. On receive TG verifies if packets which source address is not in routes are dropped.

+-----------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                | Documentation                                                                                                                                                         | Status |
+=====================================================+=======================================================================================================================================================================+========+
| TC01: VPP source RPF check on IPv4 src-addr         |  |br| [Top] TG-DUT1-DUT2-TG  |br| [Cfg] On DUT1 setup IP source check.  |br| [Ver] Make TG verify matching packets which source address is not in routes are dropped. | PASS   |
+-----------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: VPP pass traffic on non-enabled RPF interface |  |br| [Top] TG-DUT1-DUT2-TG  |br| [Cfg] On DUT1 setup IP source check.  |br| [Ver] Make TG verify matching packets on non-enabled RPF interface are passed.           | PASS   |
+-----------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

Tap Interface
`````````````



api-crud-tap-func
'''''''''''''''''

**Tap Interface CRUD Tests**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Enc] Packet Encapsulations:** No packet sent.  

 - **[Cfg] DUT configuration:** Add/Modify/Delete linux-TAP on DUT1.  

 - **[Ver] Verification:** Check dump of tap interfaces for correctness.  

 - **[Ref] Applicable standard specifications:**

+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                  | Documentation                                                                                                                                                                                    | Status |
+=======================================+==================================================================================================================================================================================================+========+
| TC01: Tap Interface Modify And Delete |  |br| [Top] TG-DUT1-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] Set two TAP interfaces.  |br| [Ver] Verify that TAP interface can be modified, deleted, and no other TAP interface is affected. | PASS   |
+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-eth-l2bdbasemaclrn-eth-2tap-func
''''''''''''''''''''''''''''''''''''''

**Tap Interface Traffic Tests**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) MAC learning enabled; Split Horizon Groups (SHG) are set depending on test case; Namespaces (NM) are set on DUT1 with attached linux-TAP.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent by TG on link to DUT1; On receipt TG verifies packets for correctness and their IPv4 src-addr, dst-addr, and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                          | Documentation                                                                                                                                                                                                                                                                                                                                              | Status |
+===============================+============================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: Tap Interface Simple BD |  |br| [Top] TG-DUT1-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure two L2BD with two if's for each L2BD with MAC learning and one L2BD joining two linux-TAP interfaces created by VPP located in namespace.  |br| [Ver] Packet sent from TG is passed through all L2BD and received back on TG. Then src_ip, dst_ip and MAC are checked.  | PASS   |
+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-eth-l2bdbasemaclrn-l2shg-eth-2tap-func
''''''''''''''''''''''''''''''''''''''''''''

**Tap Interface Traffic Tests**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) MAC learning enabled; Split Horizon Groups (SHG) are set depending on test case; Namespaces (NM) are set on DUT1 with attached linux-TAP.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent by TG on link to DUT1; On receipt TG verifies packets for correctness and their IPv4 src-addr, dst-addr, and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+--------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                             | Documentation                                                                                                                                                                                                                                                                                                                                                                                                    | Status |
+==================================================+==================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: Tap Interface BD - Different Split Horizon |  |br| [Top] TG-DUT1-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure one if into L2BD with MAC learning. Add two TAP interfaces into this L2BD and assign them different SHG. Setup two namespaces and assign two linux-TAP interfaces to it respectively.  |br| [Ver] Packet is sent from TG to both linux-TAP interfaces and reply is checked. Ping from First linux-TAP to another should pass. | PASS   |
+--------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: Tap Interface BD - Same Split Horizon      |  |br| [Top] TG-DUT1-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure one if into L2BD with MAC learning. Add two TAP interfaces into this L2BD and assign them same SHG. Setup two namespaces and assign two linux-TAP interfaces to it respectively.  |br| [Ver] Packet is sent from TG to both linux-TAP interfaces and reply is checked. Ping from First linux-TAP to another should fail.      | PASS   |
+--------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-eth-1tap-func
''''''''''''''''''''''''''''''''''

**Tap Interface Traffic Tests**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) MAC learning enabled; Split Horizon Groups (SHG) are set depending on test case; Namespaces (NM) are set on DUT1 with attached linux-TAP.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent by TG on link to DUT1; On receipt TG verifies packets for correctness and their IPv4 src-addr, dst-addr, and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+-----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                          | Documentation                                                                                                                                                                                                                                                                                             | Status |
+===============================================+===========================================================================================================================================================================================================================================================================================================+========+
| TC01: Tap Interface IP Ping Without Namespace |  |br| [Top] TG-DUT1-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure two interface addresses with IPv4 of which one is TAP interface ( dut_to_tg_if and TAP ). and one is linux-TAP.  |br| [Ver] Packet sent from TG gets to the destination and ICMP-reply is received on TG.              | PASS   |
+-----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: Tap Interface IP Ping With Namespace    |  |br| [Top] TG-DUT1-TG.  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] On DUT1 configure two interface addresses with IPv4 of which one is TAP interface ( dut_to_tg_if and TAP ). and one is linux-TAP in namespace.  |br| [Ver] Packet sent from TG gets to the destination and ICMP-reply is received on TG. | PASS   |
+-----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

Telemetry - IPFIX and SPAN
``````````````````````````



IPFIX Netflow Statistics
''''''''''''''''''''''''



eth2p-ethip4-ip4base-ip4ipfixbase-func
......................................

**IPFIX ipv4 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector. Test packets are sent from TG to DUT1. TG listens for flow report packets and verifies that they contains flow record of test packets sent.

+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                      | Documentation                                                                                                                                                                                                                                                                                                                                              | Status |
+===========================================================================+============================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT sends IPFIX template and data packets                           |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and a basic classify session.  |br| [Ver] Make TG listen for IPFIX template and data packets, verify that packet is received and correct. No packets are sent from TG.  |br| [Ref] RFC 7011                                                        | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow for traffic by source address               |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                                  | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT reports packet flow for traffic with local destination address  |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT1.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                        | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT reports packet flow for traffic with remote destination address |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT2.  |br| [Ver] Make TG send a packet to DUT2 through DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011           | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT reports packet flow for traffic by source and destination port  |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address and source and destination ports.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011 | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-ip4ipfixscale-func
.......................................

**IPFIX ipv4 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector. Test packets are sent from TG to DUT1. TG listens for flow report packets and verifies that they contains flow record of test packets sent.

+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                         | Status |
+=====================================================================+=======================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT reports packet flow with a large number of packets        |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send packets to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets.  |br| [Ref] RFC 7011                                                                             | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow when multiple sessions are configured |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add several classify sessions with different ports.  |br| [Ver] Make TG send packets to DUT1 using a range of ports matching configured sessions, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets for each session.  |br| [Ref] RFC 7011 | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ip6ipfixbase-func
......................................

**IPFIX ipv6 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 and IPV6 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector.Test packets are sent from TG to or through DUT1. TG listens for flow report packets and verifies that they contains flow records of test packets sent.

+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                      | Documentation                                                                                                                                                                                                                                                                                                                                              | Status |
+===========================================================================+============================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT reports packet flow for traffic by source address               |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                                  | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow for traffic with local destination address  |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT1.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                        | FAIL   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT reports packet flow for traffic with remote destination address |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT2.  |br| [Ver] Make TG send a packet to DUT2 through DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011           | FAIL   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT reports packet flow for traffic by source and destination port  |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address and source and destination ports.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011 | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ip6ipfixscale-func
.......................................

**IPFIX ipv6 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 and IPV6 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector.Test packets are sent from TG to or through DUT1. TG listens for flow report packets and verifies that they contains flow records of test packets sent.

+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                         | Status |
+=====================================================================+=======================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT reports packet flow with a large number of packets        |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send packets to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets.  |br| [Ref] RFC 7011                                                                             | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow when multiple sessions are configured |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add several classify sessions with different ports.  |br| [Ver] Make TG send packets to DUT1 using a range of ports matching configured sessions, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets for each session.  |br| [Ref] RFC 7011 | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

SPAN Port Mirroring
'''''''''''''''''''



eth2p-ethip4-ip4base-spanrx-func
................................

**SPAN test suite**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** DUT1 is configured with SPAN mirroring from the first DUT1-TG interface to the second one.  

 - **[Ver] TG verification:** Test ARP or ICMP packets are sent by TG on first link to DUT1; On receipt through second link TG verifies the copy of packet sent and the copy of DUT's reply packet.  

 - **[Ref] Applicable standard specifications: None?**

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                         | Documentation                                                                                                                                                                                                                                                                                                            | Status |
+==============================================================+==========================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT mirrors L2 packets from one interface to another   |  |br| [Top] TG=DUT1  |br| [Cfg] On DUT1 configure IPv4 address and set SPAN mirroring from one DUT interface to the other.  |br| [Ver] Make TG send an ARP packet to DUT through one interface, then receive a copy of sent packet and of DUT's ARP reply on the second interface.                                       | FAIL   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT mirrors IPv4 packets from one interface to another |  |br| [Top] TG=DUT1  |br| [Cfg] On DUT1 configure IPv4 address, add ARP entry for one TG  interface and set SPAN mirroring from one DUT interface to the other.  |br| [Ver] Make TG send an ICMP packet to DUT through one interface, then receive a copy of sent packet and of DUT's ICMP reply on the other interface. | FAIL   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-spanrx-func
................................

**SPAN test suite**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** DUT1 is configured with SPAN mirroring from the first DUT1-TG interface to the second one.  

 - **[Ver] TG verification:** Test ARP or ICMP packets are sent by TG on first link to DUT1; On receipt through second link TG verifies the copy of packet sent and the copy of DUT's reply packet.  

 - **[Ref] Applicable standard specifications: None?**

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                         | Documentation                                                                                                                                                                                                                                                                                                            | Status |
+==============================================================+==========================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT mirrors IPv6 packets from one interface to another |  |br| [Top] TG=DUT1  |br| [Cfg] On DUT1 configure IPv6 address, add ARP entry for one TG  interface and set SPAN mirroring from one DUT interface to the other.  |br| [Ver] Make TG send an ICMP packet to DUT through one interface, then receive a copy of sent packet and of DUT's ICMP reply on the other interface. | FAIL   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

VRF Routed-Forwarding
`````````````````````



eth2p-ethip4-ip4basevrf-func
''''''''''''''''''''''''''''

**Vpn routed forwarding - baseline IPv4**  

 - **[Top] Network Topologies:** TG=DUT1=DUT2=TG 3-node topology with two links in between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv4-ICMPv4 for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** Each DUT is configured with two VRF tables; Separation of traffic is tested by IP packets; Basic ARP and ROUTES are set on DUT nodes; IP addresses are set on DUT interfaces.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent by TG on link to DUT1, DUT2 or back to TG; On receipt TG verifies packets for correctness and their IPv4 src-addr, dst-addr, and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+----------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                         | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Status |
+==============================================================================================+===============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: TG packets routed to DUT ingress interface, VPP configured with two VRFs               |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. On every ingress and egress port on DUT is configured ARP and each DUT is configured with one route.  |br| [Ver] Packet is send from TG->DUT1-if1 to DUT1->TG-if1 and from TG->DUT1-if2 to DUT1->TG-if2 and checked if arrived.     | PASS   |
+----------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: TG packets routed to DUT egress interface, VPP configured with two VRFs                |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. On every ingress and egress port on DUT is configured ARP and each DUT is configured with one route.  |br| [Ver] Packet is send from TG->DUT1-if1 to DUT1->DUT2-if1 and from TG->DUT1-if2 to DUT1->DUT2-if2 and checked if arrived. | PASS   |
+----------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: TG packets routed to DUT2 ingress interface through DUT1, VPP configured with two VRFs |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. On every ingress and egress port on DUT is configured ARP and each DUT is configured with one route.  |br| [Ver] Packet is send from TG->DUT1-if1 to DUT2->DUT1-if1 and from TG->DUT1-if2 to DUT2->DUT1-if2 and checked if arrived. | PASS   |
+----------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: TG packets routed to DUT2 egress interface through DUT1, VPP configured with two VRFs  |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. On every ingress and egress port on DUT is configured ARP and each DUT is configured with one route.  |br| [Ver] Packet is send from TG->DUT1-if1 to DUT2->TG-if1 and from TG->DUT1-if2 to DUT2->TG-if2 and checked if arrived.     | PASS   |
+----------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: TG packets routed to TG through DUT1 and DUT2, VPP configured with two VRFs            |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv4-ICMPv4.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. On every ingress and egress port on DUT is configured ARP and each DUT is configured with one route.  |br| [Ver] Packet is send from TG->DUT1-if1 to TG->DUT2-if1 and from TG->DUT1-if2 to TG->DUT2-if2 and checked if arrived.     | PASS   |
+----------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6basevrf-func
''''''''''''''''''''''''''''

**Vpn routed forwarding - baseline IPv6**  

 - **[Top] Network Topologies:** TG=DUT1=DUT2=TG 3-node topology with two links in between nodes.  

 - **[Enc] Packet Encapsulations:** Eth-IPv6-ICMPv6  

 - **[Cfg] DUT configuration:** Each DUT is configured with two VRF tables; Separation of traffic is tested by IP packets; Neighbors and Routes are set on DUT nodes; IP addresses are set on DUT interfaces.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent by TG on link to DUT1, DUT2 or back to TG; On receipt TG verifies packets for correctness and their IPv6 src-addr, dst-addr, and MAC addresses.  

 - **[Ref] Applicable standard specifications:**

+----------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                         | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Status |
+==============================================================================================+=======================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: TG packets routed to DUT ingress interface, VPP configured with two VRFs               |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. Neighbors are configured for each DUTs ingress/egress ports, and each VRF is configured with just one route.  |br| [Ver] Packet is sent from TG->DUT1-if1 to DUT1->TG-if1 and from TG->DUT1-if2 to DUT1->TG-if2 and checked if arrived.     | PASS   |
+----------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: TG packets routed to DUT egress interface, VPP configured with two VRFs                |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. Neighbors are configured for each DUTs ingress/egress ports, and each VRF is configured with just one route.  |br| [Ver] Packet is sent from TG->DUT1-if1 to DUT1->DUT2-if1 and from TG->DUT1-if2 to DUT1->DUT2-if2 and checked if arrived. | PASS   |
+----------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: TG packets routed to DUT2 ingress interface through DUT1, VPP configured with two VRFs |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. Neighbors are configured for each DUTs ingress/egress ports, and each VRF is configured with just one route.  |br| [Ver] Packet is sent from TG->DUT1-if1 to DUT2->DUT1-if1 and from TG->DUT1-if2 to DUT2->DUT1-if2 and checked if arrived. | PASS   |
+----------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: TG packets routed to DUT2 egress interface through DUT1, VPP configured with two VRFs  |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. Neighbors are configured for each DUTs ingress/egress ports, and each VRF is configured with just one route.  |br| [Ver] Packet is sent from TG->DUT1-if1 to DUT2->TG-if1 and from TG->DUT1-if2 to DUT2->TG-if2 and checked if arrived.     | PASS   |
+----------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: TG packets routed to TG through DUT1 and DUT2, VPP configured with two VRFs            |  |br| [Top] TG=DUT1=DUT2=TG  |br| [Enc] Eth-IPv6-ICMPv6.  |br| [Cfg] DUT1 and DUT2 are both configured with two fib tables. Each table is assigned to 2 interfaces to separate the traffic. Interfaces are configured with IP addresses from *Variables*. Neighbors are configured for each DUTs ingress/egress ports, and each VRF is configured with just one route.  |br| [Ver] Packet is sent from TG->DUT1-if1 to TG->DUT2-if1 and from TG->DUT1-if2 to TG->DUT2-if2 and checked if arrived.     | PASS   |
+----------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

iACL Security
`````````````



eth2p-eth-l2xcbase-iaclbase-func
''''''''''''''''''''''''''''''''

**Ingress ACL test cases**   

 - **[Top] Network Topologies:** TG - DUT1 - DUT2 - TG with one link between the nodes.  

 - **[Cfg] DUT configuration:** DUT2 is configured with L2 Cross connect. DUT1 is configured with iACL classification on link to TG,  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in one direction by TG on link to DUT1 and received on TG link to DUT2. On receive TG verifies if packets are dropped.

+-------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                              | Documentation                                                                                                                                                                   | Status |
+===================================================================+=================================================================================================================================================================================+========+
| TC01: DUT with iACL MAC src-addr drops matching pkts              |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 add source MAC address to classify table with 'deny'.  |br| [Ver] Make TG verify matching packets are dropped.                 | PASS   |
+-------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT with iACL MAC dst-addr drops matching pkts              |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 add destination MAC address to classify table with 'deny'.  |br| [Ver] Make TG verify matching packets are dropped.            | PASS   |
+-------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT with iACL MAC src-addr and dst-addr drops matching pkts |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 add source and destination MAC address to classify table with 'deny'.  |br| [Ver] Make TG verify matching packets are dropped. | PASS   |
+-------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT with iACL EtherType drops matching pkts                 |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 add EtherType IPv4(0x0800) to classify table with 'deny'.  |br| [Ver] Make TG verify matching packets are dropped.             | PASS   |
+-------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-iaclbase-func
''''''''''''''''''''''''''''''''''

**IPv4 routing with ingress ACL test cases**  Encapsulations: Eth-IPv4 on links TG-DUT1, TG-DUT2, DUT1-DUT2. IPv4 ingress ACL (iACL) tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 and DUT2 are configured with IPv4 routing and static routes. DUT1 is configured with iACL on link to TG, iACL classification and permit/deny action are configured on a per test case basis. Test ICMPv4 Echo Request packets are sent in one direction by TG on link to DUT1 and received on TG link to DUT2. On receive TG verifies if packets are dropped, or if received verifies packet IPv4 src-addr, dst-addr and MAC addresses.

+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                     | Documentation                                                                                                                 | Status |
+==========================================================================+===============================================================================================================================+========+
| TC01: DUT with iACL IPv4 src-addr drops matching pkts                    | On DUT1 add source IPv4 address to classify table with 'deny'. Make TG verify matching packets are dropped.                   | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT with iACL IPv4 dst-addr drops matching pkts                    | On DUT1 add destination IPv4 address to classify table with 'deny'. Make TG verify matching packets are dropped.              | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT with iACL IPv4 src-addr and dst-addr drops matching pkts       | On DUT1 add source and destination IPv4 addresses to classify table with 'deny'. Make TG verify matching packets are dropped. | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT with iACL IPv4 protocol set to TCP drops matching pkts         | On DUT1 add protocol mask and TCP protocol (0x06) to classify table with 'deny'. Make TG verify matching packets are dropped. | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT with iACL IPv4 protocol set to UDP drops matching pkts         | On DUT1 add protocol mask and UDP protocol (0x11) to classify table with 'deny'. Make TG verify matching packets are dropped. | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC06: DUT with iACL IPv4 TCP src-ports drops matching pkts               | On DUT1 add TCP source ports to classify table with 'deny'. Make TG verify matching packets are dropped.                      | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC07: DUT with iACL IPv4 TCP dst-ports drops matching pkts               | On DUT1 add TCP destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.                 | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC08: DUT with iACL IPv4 TCP src-ports and dst-ports drops matching pkts | On DUT1 add TCP source and destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.      | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC09: DUT with iACL IPv4 UDP src-ports drops matching pkts               | On DUT1 add UDP source ports to classify table with 'deny'. Make TG verify matching packets are dropped.                      | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC10: DUT with iACL IPv4 UDP dst-ports drops matching pkts               | On DUT1 add TCP destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.                 | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+
| TC11: DUT with iACL IPv4 UDP src-ports and dst-ports drops matching pkts | On DUT1 add UDP source and destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.      | PASS   |
+--------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-iaclbase-func
''''''''''''''''''''''''''''''''''

**IPv6 routing with ingress ACL test cases**  Encapsulations: Eth-IPv6 on links TG-DUT1, TG-DUT2, DUT1-DUT2. IPv6 ingress ACL (iACL) tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 and DUT2 are configured with IPv6 routing and static routes. DUT1 is configured with iACL on link to TG, iACL classification and permit/deny action are configured on a per test case basis. Test ICMPv6 Echo Request packets are sent in one direction by TG on link to DUT1 and received on TG link to DUT2. On receive TG verifies if packets are dropped, or if received verifies packet IPv6 src-addr, dst-addr and MAC addresses.

+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                           | Documentation                                                                                                                                                                    | Status |
+================================================================================================+==================================================================================================================================================================================+========+
| TC01: DUT with iACL IPv6 src-addr drops matching pkts                                          | On DUT1 add source IPv6 address to classify table with 'deny'. Make TG verify matching packets are dropped.                                                                      | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT with iACL IPv6 dst-addr drops matching pkts                                          | On DUT1 add destination IPv6 address to classify table with 'deny'. Make TG verify matching packets are dropped.                                                                 | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT with iACL IPv6 src-addr and dst-addr drops matching pkts                             | On DUT1 add source and destination IPv6 addresses to classify table with 'deny'. Make TG verify matching packets are dropped.                                                    | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT with iACL IPv6 protocol set to TCP drops matching pkts                               | On DUT1 add protocol mask and TCP protocol (0x06) to classify table with 'deny'. Make TG verify matching packets are dropped.                                                    | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT with iACL IPv6 protocol set to UDP drops matching pkts                               | On DUT1 add protocol mask and UDP protocol (0x11) to classify table with 'deny'. Make TG verify matching packets are dropped.                                                    | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC06: DUT with iACL IPv6 TCP src-ports drops matching pkts                                     | On DUT1 add TCP source ports to classify table with 'deny'. Make TG verify matching packets are dropped.                                                                         | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC07: DUT with iACL IPv6 TCP dst-ports drops matching pkts                                     | On DUT1 add TCP destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.                                                                    | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC08: DUT with iACL IPv6 TCP src-ports and dst-ports drops matching pkts                       | On DUT1 add TCP source and destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.                                                         | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC09: DUT with iACL IPv6 UDP src-ports drops matching pkts                                     | On DUT1 add UDP source ports to classify table with 'deny'. Make TG verify matching packets are dropped.                                                                         | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC10: DUT with iACL IPv6 UDP dst-ports drops matching pkts                                     | On DUT1 add TCP destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.                                                                    | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC11: DUT with iACL IPv6 UDP src-ports and dst-ports drops matching pkts                       | On DUT1 add UDP source and destination ports to classify table with 'deny'. Make TG verify matching packets are dropped.                                                         | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC12: DUT with iACL MAC src-addr and iACL IPv6 UDP src-ports and dst-ports drops matching pkts | On DUT1 add source MAC address to classify (L2) table and add UDP source and destination ports to classify (hex) table with 'deny'. Make TG verify matching packets are dropped. | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

IPv4 Routed-Forwarding
``````````````````````



eth2p-ethip4-ip4base-func
'''''''''''''''''''''''''

**IPv4 routing test cases**  RFC791 IPv4, RFC826 ARP, RFC792 ICMPv4. Encapsulations: Eth-IPv4-ICMPv4 on links TG-DUT1, TG-DUT2, DUT1-DUT2. IPv4 routing tests use circular 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 and DUT2 are configured with IPv4 routing and static routes. Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2 and received on TG links on the other side of circular topology. On receive TG verifies packets IPv4 src-addr, dst-addr and MAC addresses.

+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                 | Documentation                                                                                                                                                                   | Status |
+======================================================================+=================================================================================================================================================================================+========+
| TC01: DUT replies to ICMPv4 Echo Req to its ingress interface        | Make TG send ICMPv4 Echo Req to DUT ingress interface. Make TG verify ICMP Echo Reply is correct.                                                                               | PASS   |
+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT routes IPv4 to its egress interface                        | Make TG send ICMPv4 Echo Req towards DUT1 egress interface connected to DUT2. Make TG verify ICMPv4 Echo Reply is correct.                                                      | PASS   |
+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT1 routes IPv4 to DUT2 ingress interface                     | Make TG send ICMPv4 Echo Req towards DUT2 ingress interface connected to DUT1. Make TG verify ICMPv4 Echo Reply is correct.                                                     | PASS   |
+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT1 routes IPv4 to DUT2 egress interface                      | Make TG send ICMPv4 Echo Req towards DUT2 egress interface connected to TG. Make TG verify ICMPv4 Echo Reply is correct.                                                        | PASS   |
+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT1 and DUT2 route IPv4 between TG interfaces                 | Make TG send ICMPv4 Echo Req between its interfaces across DUT1 and DUT2. Make TG verify ICMPv4 Echo Replies are correct.                                                       | PASS   |
+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC06: DUT replies to ICMPv4 Echo Reqs with size 64B-to-1500B-incr-1B | Make TG send ICMPv4 Echo Reqs to DUT ingress interface, incrementating frame size from 64B to 1500B with increment step of 1Byte. Make TG verify ICMP Echo Replies are correct. | PASS   |
+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC08: DUT replies to ARP request                                     | Make TG send ARP Request to DUT and verify ARP Reply is correct.                                                                                                                | PASS   |
+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-ip4arp-func
''''''''''''''''''''''''''''''''

**IPv4 ARP test cases**  RFC826 ARP: Eth-IPv4 and Eth-ARP on links TG-DUT1, TG-DUT2, DUT1-DUT2: IPv4 ARP tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 and DUT2 are configured with IPv4 routing and static routes. DUT ARP functionality is tested by making TG send ICMPv4 Echo Requests towards its other interface via DUT1 and DUT2.

+---------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                      | Documentation                                                                                                                                                            | Status |
+===========================================================================+==========================================================================================================================================================================+========+
| TC01: DUT sends ARP Request for unresolved locally connected IPv4 address | Make TG send test packet destined to IPv4 address of its other interface connected to DUT2. Make TG verify DUT2 sends ARP Request for locally connected TG IPv4 address. | PASS   |
+---------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT sends ARP Request for route next hop IPv4 address               | Make TG send test packet destined to IPv4 address matching static route on DUT2. Make TG verify DUT2 sends ARP Request for next hop of the static route.                 | PASS   |
+---------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-ip4ecmp-func
'''''''''''''''''''''''''''''''''

**Ipv4 Multipath routing test cases**   

 - **[Top] Network topologies:** TG=DUT 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** On DUT configure interfaces IPv4 adresses, and multipath routing.  

 - **[Ver] TG verification:** Test packets are sent from TG on the first link to DUT. Packet is received on TG on the second link from DUT1.

+-----------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                    | Documentation                                                                                                                                                                                                                               | Status |
+=========================================+=============================================================================================================================================================================================================================================+========+
| TC01: IPv4 Equal-cost multipath routing |  |br| [Top] TG=DUT  |br| [Cfg] On DUT configure multipath routing wiht two equal-cost paths.  |br| [Ver] TG sends 100 IPv4 ICMP packets traffic on the first link to DUT. On second link to TG verify if traffic is divided into two paths. | PASS   |
+-----------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-ip4proxyarp-func
'''''''''''''''''''''''''''''''''''''

**RFC1027 Proxy ARP test cases**   

 - **[Top] Network topologies:** TG-DUT1 2-node topology with single link between nodes.  

 - **[Cfg] DUT configuration:** DUT1 is configured with Proxy ARP  

 - **[Ver] TG verification:** Test ARP Request packet is sent from TG on link to DUT1; on receive TG verifies ARP reply packet for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC1027.

+-------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                      | Documentation                                                                                                                                                                                                                                                                              | Status |
+===========================================================================================+============================================================================================================================================================================================================================================================================================+========+
| TC01: DUT sends ARP reply on behalf of another machine from the IP range                  |  |br| [Top] TG-DUT1.  |br| [Ref] RFC1027.  |br| [Cfg] On DUT1 configure interface IPv4 address and proxy ARP for IP range.  |br| [Ver] Make TG send ARP request to DUT1 interface, verify if DUT1 sends correct ARP reply on behalf of machine which IP is in range.                       | PASS   |
+-------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT sends ARP reply on behalf of another machine from beginning of the IP range     |  |br| [Top] TG-DUT1.  |br| [Ref] RFC1027.  |br| [Cfg] On DUT1 configure interface IPv4 address and proxy ARP for IP range.  |br| [Ver] Make TG send ARP request to DUT1 interface, verify if DUT1 sends correct ARP reply on behalf of machine which IP is from beginning of the IP range. | PASS   |
+-------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT sends ARP reply on behalf of another machine from end of the IP range           |  |br| [Top] TG-DUT1.  |br| [Ref] RFC1027.  |br| [Cfg] On DUT1 configure interface IPv4 address and proxy ARP for IP range.  |br| [Ver] Make TG send ARP request to DUT1 interface, verify if DUT1 sends correct ARP reply on behalf of machine which IP is from end of the IP range.       | PASS   |
+-------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT does not send ARP reply on behalf of another machine from below of the IP range |  |br| [Top] TG-DUT1.  |br| [Ref] RFC1027.  |br| [Cfg] On DUT1 configure interface IPv4 address and proxy ARP for IP range.  |br| [Ver] Make TG send ARP request to DUT1 interface, verify if DUT1 does not send ARP reply on behalf of machine which IP is from below of the IP range.     | PASS   |
+-------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT does not send ARP reply on behalf of another machine from above of the IP range |  |br| [Top] TG-DUT1.  |br| [Ref] RFC1027.  |br| [Cfg] On DUT1 configure interface IPv4 address and proxy ARP for IP range.  |br| [Ver] Make TG send ARP request to DUT1 interface, verify if DUT1 does not send ARP reply on behalf of machine which IP is from above of the IP range.     | PASS   |
+-------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

QoS Policer Metering
````````````````````



eth2p-ethip4-ip4base-ipolicemarkbase-func
'''''''''''''''''''''''''''''''''''''''''

**IPv4 policer test cases**   

 - **[Top] Network topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** On DUT1 configure interfaces IPv4 adresses, and static ARP record on the second interface.  

 - **[Ver] TG verification:** Test packet is sent from TG on the first link to DUT1. Packet is received on TG on the second link from DUT1.  

 - **[Ref] Applicable standard specifications:** RFC2474, RFC2697, RFC2698.

+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                            | Documentation                                                                                                                                                                                                                                                                                                                      | Status |
+=================================================+====================================================================================================================================================================================================================================================================================================================================+========+
| TC01: VPP policer 2R3C Color-aware marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2698.  |br| [Cfg] On DUT1 configure 2R3C color-aware policer on the first interface.  |br| [Ver] TG sends IPv4 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv4 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: VPP policer 2R3C Color-blind marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2698.  |br| [Cfg] On DUT1 configure 2R3C color-blind policer on the first interface.  |br| [Ver] TG sends IPv4 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv4 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: VPP policer 1R3C Color-aware marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2697.  |br| [Cfg] On DUT1 configure 1R3C color-aware policer on the first interface.  |br| [Ver] TG sends IPv4 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv4 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: VPP policer 1R3C Color-blind marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2697.  |br| [Cfg] On DUT1 configure 1R3C color-blind policer on the first interface.  |br| [Ver] TG sends IPv4 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv4 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ipolicemarkbase-func
'''''''''''''''''''''''''''''''''''''''''

**IPv6 policer test cases**   

 - **[Top] Network topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** On DUT1 configure interfaces IPv6 adresses, and static neighbor record on the second interface.  

 - **[Ver] TG verification:** Test packet is sent from TG on the first link to DUT1. Packet is received on TG on the second link from DUT1.  

 - **[Ref] Applicable standard specifications:** RFC2474, RFC2697, RFC2698.

+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                            | Documentation                                                                                                                                                                                                                                                                                                                      | Status |
+=================================================+====================================================================================================================================================================================================================================================================================================================================+========+
| TC01: VPP policer 2R3C Color-aware marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2698.  |br| [Cfg] On DUT1 configure 2R3C color-aware policer on the first interface.  |br| [Ver] TG sends IPv6 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv6 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: VPP policer 2R3C Color-blind marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2698.  |br| [Cfg] On DUT1 configure 2R3C color-blind policer on the first interface.  |br| [Ver] TG sends IPv6 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv6 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: VPP policer 1R3C Color-aware marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2697.  |br| [Cfg] On DUT1 configure 1R3C color-aware policer on the first interface.  |br| [Ver] TG sends IPv6 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv6 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: VPP policer 1R3C Color-blind marks packet |  |br| [Top] TG=DUT1.  |br| [Ref] RFC2474, RFC2697.  |br| [Cfg] On DUT1 configure 1R3C color-blind policer on the first interface.  |br| [Ver] TG sends IPv6 TCP packet on the first link to DUT1. On DUT1 packet is marked with DSCP tag. Verify if DUT1 sends correct IPv6 TCP packet with correct DSCP on the second link to TG. | PASS   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

VLAN Tag Translation
````````````````````



eth2p-dot1ad--dot1q-l2bdbasemaclrn-vlantrans21-func
'''''''''''''''''''''''''''''''''''''''''''''''''''

**L2BD with VLAN tag rewrite test cases - transalte-2-1**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1ad-IPv4-ICMPv4 or Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1, Eth-dot1q-IPv4-ICMPv4 or Eth-dot1q-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv4-ICMPv4 or Eth-IPv6-ICMPv6 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with bridge domain (L2BD) switching combined with MAC learning enabled and added VLAN sub-interface with VLAN tag rewrite translate-2-1 method of interface towards TG and interface towards DUT2. DUT2 is configured with L2 bridge domain (L2BD) switching between VLAN sub-interface with VLAN tag rewrite pop-1 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Status |
+================================================================================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VLAN translate-2-1 (DUT1) switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv4-ICMPv4 on TG-DUT1,  Eth-dot1q-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain (L2BD) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-1 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv4 Echo Req tagged with Dot1ad tags from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT1 and DUT2 with L2BD and VLAN translate-2-1 (DUT1) switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1,  Eth-dot1q-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain (L2BD) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-1 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv6 Echo Req tagged with Dot1ad tags from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1ad--dot1q-l2xcbase-vlantrans21-func
'''''''''''''''''''''''''''''''''''''''''''''

**L2XC with VLAN tag rewrite test cases - translate-2-1**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1ad-IPv4-ICMPv4 or Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1, Eth-dot1q-IPv4-ICMPv4 or Eth-dot1aq-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite translate-2-1 method of interface towards TG and interface towards DUT2. DUT2 is configured configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite pop-1 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Status |
+================================================================================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC and VLAN translate-2-1 (DUT1) switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv4-ICMPv4 on TG-DUT1,  Eth-dot1q-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-1 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv4 Echo Req tagged with Dot1ad tags from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT1 and DUT2 with L2XC and VLAN translate-2-1 (DUT1) switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1,  Eth-dot1q-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-1 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv6 Echo Req tagegd with Dot1ad tags from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1ad-l2bdbasemaclrn-vlantrans22-func
''''''''''''''''''''''''''''''''''''''''''''

**L2BD with VLAN tag rewrite test cases - translate-2-2**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1ad-IPv4-ICMPv4 or Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1 and DUT1-DUT2, Eth-IPv4-ICMPv4 or Eth-IPv6-ICMPv6 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with bridge domain (L2BD) switching combined with MAC learning enabled and added VLAN sub-interface with VLAN tag rewrite translate-2-2 method of interface towards TG and interface towards DUT2. DUT2 is configured with L2 bridge domain (L2BD) switching between VLAN sub-interface with VLAN tag rewrite pop-2 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+-----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                    | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Status |
+=========================================================================================+========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VLAN translate-2-2 switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv4-ICMPv4 on TG-DUT1 and  on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain (L2BD) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-2 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-2 tagged with Dot1ad tags from one of its interfaces to another one method.  |br| [Ver] Make TG send ICMPv4 Echo Req via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1ad | PASS   |
+-----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT1 and DUT2 with L2BD and VLAN translate-2-2 switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1 and  on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain (L2BD) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-2 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-1 tagged with Dot1ad tags from one of its interfaces to another one method.  |br| [Ver] Make TG send ICMPv6 Echo Req via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1ad | PASS   |
+-----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1ad-l2xcbase-func
''''''''''''''''''''''''''

**L2 cross-connect with QinQ test cases**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1ad-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 cross-connect (L2XC) switching with 802.1ad QinQ VLAN tag push and pop.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1ad.

+----------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                   | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Status |
+========================================================================================+=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC and two VLAN push-pop switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv4-ICMPv4 on  DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure L2 cross-connect (L2XC), each with one interface to TG and one Ethernet interface towards the other DUT; each DUT pushes two VLAN tags on packets received from local TG, and popping two VLAN tags on packets transmitted to local TG.  |br| [Ver] Make TG send ICMPv4 Echo Req in both directions between two of its interfaces to be switched by DUT1 and DUT2; verify all packets are received.  |br| [Ref] IEEE 802.1ad. | PASS   |
+----------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1ad-l2xcbase-vlantrans22-func
''''''''''''''''''''''''''''''''''''''

**L2XC with VLAN tag rewrite test cases - translate-2-2**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1ad-IPv4-ICMPv4 or Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1 and DUT1-DUT2, Eth-IPv4-ICMPv4 or Eth-IPv6-ICMPv6 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite translate-2-2 method of interface towards TG and interface towards DUT2. DUT2 is configured configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite pop-2 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+-----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                    | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Status |
+=========================================================================================+========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC and VLAN translate-2-2 switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv4-ICMPv4 on TG-DUT1 and  on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-2 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-1 tagged with Dot1ad tags from one of its interfaces to another one method.  |br| [Ver] Make TG send ICMPv4 Echo Req via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1ad | PASS   |
+-----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT1 and DUT2 with L2XC and VLAN translate-2-2 switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1ad-IPv6-ICMPv6 on TG-DUT1 and  on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one Dot1ad sub-interface towards TG with VLAN tag rewrite translate-2-2 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-1 tagegd with Dot1ad tags from one of its interfaces to another one method.  |br| [Ver] Make TG send ICMPv6 Echo Req via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1ad | PASS   |
+-----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1q--dot1ad-l2bdbasemaclrn-vlantrans12-func
'''''''''''''''''''''''''''''''''''''''''''''''''''

**L2BD with VLAN tag rewrite test cases - translate-1-2**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1q-IPv4-ICMPv4 or Eth-dot1q-IPv6-ICMPv6 on TG-DUT1, Eth-dot1ad-IPv4-ICMPv4 or Eth-dot1ad-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv4-ICMPv4 or Eth-IPv6-ICMPv6 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with bridge domain (L2BD) switching combined with MAC learning enabled and added VLAN sub-interface with VLAN tag rewrite translate-1-2 method of interface towards TG and interface towards DUT2. DUT2 is configured with L2 bridge domain (L2BD) switching between VLAN sub-interface with VLAN tag rewrite pop-2 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Status |
+================================================================================================+========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VLAN translate-1-2 (DUT1) switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv4-ICMPv4 on TG-DUT1,  Eth-dot1ad-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain (L2BD) with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-2 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-2 method.  |br| [Ver] Make TG send ICMPv4 Echo Req tagged with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT1 and DUT2 with L2BD and VLAN translate-1-2 (DUT1) switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv6-ICMPv6 on TG-DUT1,  Eth-dot1ad-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain (L2BD) with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-2 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-2 method.  |br| [Ver] Make TG send ICMPv6 Echo Req tagged with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1q--dot1ad-l2xcbase-vlantrans12-func
'''''''''''''''''''''''''''''''''''''''''''''

**L2XC with VLAN tag rewrite test cases - translate-1-2**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1q-IPv4-ICMPv4 or Eth-dot1q-IPv6-ICMPv6 on TG-DUT1, Eth-dot1ad-IPv4-ICMPv4 or Eth-dot1ad-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv4-ICMPv4 or Eth-IPv6-ICMPv6 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite translate-1-2 method of interface towards TG and interface towards DUT2. DUT2 is configured configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite pop-2 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Status |
+================================================================================================+========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC and VLAN translate-1-2 (DUT1) switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv4-ICMPv4 on TG-DUT1,  Eth-dot1ad-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-2 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-2 method.  |br| [Ver] Make TG send ICMPv4 Echo Req tagged with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT1 and DUT2 with L2XC and VLAN translate-1-2 (DUT1) switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv6-ICMPv6 on TG-DUT1,  Eth-dot1ad-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-2 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one Dot1ad sub-interface towards DUT1 with VLAN tag rewrite pop-2 method.  |br| [Ver] Make TG send ICMPv6 Echo Req tagegd with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q, IEEE 802.1ad | PASS   |
+------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1q-l2bdbasemaclrn-vlantrans11-func
'''''''''''''''''''''''''''''''''''''''''''

**L2BD with VLAN tag rewrite test cases - translate-1-1**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1q-IPv4-ICMPv4 or Eth-dot1q-IPv6-ICMPv6 on TG-DUT1 and DUT1-DUT2, Eth-IPv4-ICMPv4 or Eth-IPv6-ICMPv6 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with bridge domain (L2BD) switching combined with MAC learning enabled and added VLAN sub-interface with VLAN tag rewrite translate-1-1 method of interface towards TG and interface towards DUT2. DUT2 is configured with L2 bridge domain (L2BD) switching between VLAN sub-interface with VLAN tag rewrite pop-1 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Status |
+================================================================================================+=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VLAN translate-1-1 (DUT1) switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv4-ICMPv4 on TG-DUT1 and  DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-1 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv4 Echo Req tagged with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q        | PASS   |
+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT1 and DUT2 with L2BD and VLAN translate-1-1 (DUT1) switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv6-ICMPv6 on TG-DUT1 and  DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 bridge domain (L2BD) with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-1 method; on DUT2 configure L2 bridge domain (L2BD) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv6 Echo Req tagged with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q | PASS   |
+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-dot1q-l2xcbase-vlantrans11-func
'''''''''''''''''''''''''''''''''''''

**L2XC with VLAN tag rewrite test cases - translate-1-1**   

 - **[Top] Network Topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1q-IPv4-ICMPv4 or Eth-dot1q-IPv6-ICMPv6 on TG-DUT1 and DUT1-DUT2, Eth-IPv4-ICMPv4 or Eth-IPv4-ICMPv4 on TG-DUT2 for L2 switching of IPv4/IPv6.  

 - **[Cfg] DUT configuration:** DUT1 is configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite translate-1-1 method of interface towards TG and interface towards DUT2. DUT2 is configured configured with L2 cross-connect (L2XC) switching between VLAN sub-interface with VLAN tag rewrite pop-1 method of interface towards DUT1 and interface towards TG.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent from TG on link to DUT1 and received in TG on link form DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** IEEE 802.1q, IEEE 802.1ad.

+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                           | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Status |
+================================================================================================+=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC and VLAN translate-1-1 (DUT1) switch ICMPv4 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv4-ICMPv4 on TG-DUT1 and  DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-1 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv4 Echo Req tagged with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q | PASS   |
+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT1 and DUT2 with L2XC and VLAN translate-1-1 (DUT1) switch ICMPv6 between two TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv6-ICMPv6 on TG-DUT1 and  DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUT2.  |br| [Cfg] On DUT1 configure L2 cross-connect (L2XC) with one interface to DUT2 and one VLAN sub-interface towards TG with VLAN tag rewrite translate-1-1 method; on DUT2 configure L2 cross-connect (L2XC) with one interface to TG and one VLAN sub-interface towards DUT1 with VLAN tag rewrite pop-1 method.  |br| [Ver] Make TG send ICMPv6 Echo Req tagegd with one Dot1q tag from one of its interfaces to another one via DUT1 and DUT2; verify that packet is received.  |br| [Ref] IEEE 802.1q | PASS   |
+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

VXLAN Overlay Tunnels
`````````````````````



eth2p-dot1qip4vxlan-l2bdbasemaclrn-func
'''''''''''''''''''''''''''''''''''''''

**RFC7348 VXLAN: Bridge-domain with VXLAN over VLAN test cases**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1q-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-dot1q-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with static MACs, MAC learning enabled and Split Horizon Groups (SHG) depending on test case; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                     | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                     | Status |
+==========================================================================================+===================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4oVLAN tunnels switch ICMPv4 between TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure L2 bridge-domain (MAC learning enabled), each with one interface to TG and one VXLAN tunnel interface towards the other DUT over VLAN sub-interface.  |br| [Ver] Make TG send ICMPv4 Echo Req between two of its interfaces, verify all packets are received.  |br| [Ref] RFC7348. | PASS   |
+------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4vxlan-l2bdbasemaclrn-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''''''''''

**L2BD with VM combined with VXLAN test cases - IPv4**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Status |
+=====================================================================================================+============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01:DUT1 and DUT2 with two L2BDs and VXLANoIPv4 tunnel switch ICMPv4 between TG links and VM links |  |br| [Top] TG-DUT1-VM-DUT1-DUT2-VM-DUT2-TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn and DUTn=VM.  |br| [Cfg] On both DUTs configure two L2BDs (MAC learning enabled); first L2BD with untagged interface to TG and vhost-user interface to local VM, second one with vhost-user interface to local VM and VXLAN interface towards the other DUT. Configure linux bridge on both VMs to pass traffic between both vhost-user interfaces.  |br| [Ver] Make TG send ICMPv4 Echo Req between two of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between these TG interfaces.  |br| [Ref] RFC7348. | PASS   |
+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4vxlan-l2bdbasemaclrn-func
'''''''''''''''''''''''''''''''''''''

**Bridge-domain with VXLAN test cases - IPv4**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                       | Status |
+=====================================================================================+=====================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4 tunnels switch ICMPv4 between TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on  DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure two i/fs into L2BD with MAC learning.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 and DUT2 in both directions and are correct on receive.  |br| [Ref] RFC7348. | PASS   |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4vxlan-l2xcbase-func
'''''''''''''''''''''''''''''''

**RFC7348 VXLAN: L2 cross-connect with VXLAN test cases**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 cross-connect (L2XC) switching; VXLAN tunnels are configured between L2XCs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                            | Status |
+=====================================================================================+==========================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC and VXLANoIPv4 tunnels switch ICMPv4 between TG links |  |br| [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on   |br| [Ref] RFC7348.DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure L2 cross-connect (L2XC), each with one interface to TG and one VXLAN tunnel interface towards the other DUT.  |br| [Ver] Make TG send ICMPv4 Echo Req between two of its interfaces; verify all packets are received.  |br| [Ref] RFC7348. | PASS   |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6vxlan-l2bdbasemaclrn-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''''''''''

**L2BD with VM combined with VXLAN test cases - IPv6**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for L2 switching of IPv6.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Status |
+=====================================================================================================+============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01:DUT1 and DUT2 with two L2BDs and VXLANoIPv6 tunnel switch ICMPv6 between TG links and VM links |  |br| [Top] TG-DUT1-VM-DUT1-DUT2-VM-DUT2-TG.  |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn and DUTn=VM.  |br| [Cfg] On both DUTs configure two L2BDs (MAC learning enabled); first L2BD with untagged interface to TG and vhost-user interface to local VM, second one with vhost-user interface to local VM and VXLAN interface towards the other DUT. Configure linux bridge on both VMs to pass traffic between both vhost-user interfaces.  |br| [Ver] Make TG send ICMPv6 Echo Req between two of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between these TG interfaces.  |br| [Ref] RFC7348. | PASS   |
+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6vxlan-l2bdbasemaclrn-func
'''''''''''''''''''''''''''''''''''''

**Bridge-domain with VXLAN test cases - IPv6**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for L2 switching of IPv6.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                       | Status |
+=====================================================================================+=====================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv6 tunnels switch ICMPv6 between TG links |  |br| [Top] TG=DUT1=DUT2=TG. |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on  DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure L2 bridge-domain (MAC learning enabled), each with one interface to TG and one VXLAN tunnel interface towards the other DUT.  |br| [Ver] Make TG send ICMPv6 Echo Req between two of its interfaces to be switched by DUT1 and DUT2; verify all packets are received.  |br| [Ref] RFC7348. | PASS   |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth4p-ethip4vxlan-l2bdbasemaclrn-l2shg-func
'''''''''''''''''''''''''''''''''''''''''''

**L2BD with SHG combined with VXLAN test cases - IPv4**   

 - **[Top] Network topologies:** TG=DUT1=DUT2=TG 3-node circular topology with double parallel links.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled and Split Horizon Groups (SHG); VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                  | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+=======================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4 tunnels in SHG switch ICMPv4 between TG links            |  |br| [Top] TG=DUT1=DUT2=TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on  DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the same Split-Horizon-Group (SHG). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv4 Echo Reqs between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are not switched between TG interfaces connected to DUT2 that are isolated by SHG on DUT1.  |br| [Ref] RFC7348. | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4 tunnels in different SHGs switch ICMPv4 between TG links |  |br| [Top] TG=DUT1=DUT2=TG. |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on  DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the different Split-Horizon-Group (SHGs). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv4 Echo Req between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between all TG interfaces.  |br| [Ref] RFC7348.                                                | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth4p-ethip6vxlan-l2bdbasemaclrn-l2shg-func
'''''''''''''''''''''''''''''''''''''''''''

**L2BD with SHG combined with VXLAN test cases - IPv6**   

 - **[Top] Network topologies:** TG=DUT1=DUT2=TG 3-node circular topology with double parallel links.  

 - **[Enc] Packet encapsulations:** th-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for L2 switching of IPv6.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled and Split Horizon Groups (SHG); VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                  | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+=======================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv6 tunnels in SHG switch ICMPv6 between TG links            |  |br| [Top] TG=DUT1=DUT2=TG.  |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on  DUT1-DUT2; Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the same Split-Horizon-Group (SHG). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv6 Echo Reqs between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are not switched between TG interfaces connected to DUT2 that are isolated by SHG on DUT1.  |br| [Ref] RFC7348. | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 with L2BD and VXLANoIPv6 tunnels in different SHGs switch ICMPv6 between TG links |  |br| [Top] TG=DUT1=DUT2=TG. |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on  DUT1-DUT2; Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the different Split-Horizon-Group (SHGs). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv6 Echo Req between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between all TG interfaces.  |br| [Ref] RFC7348.                                                | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+


