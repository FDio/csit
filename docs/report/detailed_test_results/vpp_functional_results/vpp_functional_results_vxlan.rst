
.. |br| raw:: html

    <br />

VXLAN Overlay Tunnels
---------------------

eth2p-dot1qip4vxlan-l2bdbasemaclrn-func
'''''''''''''''''''''''''''''''''''''''

**RFC7348 VXLAN: Bridge-domain with VXLAN over VLAN test cases**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-dot1q-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-dot1q-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with static MACs, MAC learning enabled and Split Horizon Groups (SHG) depending on test case; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                     | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                     | Status |
+==========================================================================================+===================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4oVLAN tunnels switch ICMPv4 between TG links | [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-dot1q-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure L2 bridge-domain (MAC learning enabled), each with one interface to TG and one VXLAN tunnel interface towards the other DUT over VLAN sub-interface.  |br| [Ver] Make TG send ICMPv4 Echo Req between two of its interfaces, verify all packets are received.  |br| [Ref] RFC7348.       | FAIL   |
+------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4vxlan-l2bdbasemaclrn-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''''''''''

**L2BD with VM combined with VXLAN test cases - IPv4**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Status |
+=====================================================================================================+============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01:DUT1 and DUT2 with two L2BDs and VXLANoIPv4 tunnel switch ICMPv4 between TG links and VM links | [Top] TG-DUT1-VM-DUT1-DUT2-VM-DUT2-TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn and DUTn=VM.  |br| [Cfg] On both DUTs configure two L2BDs (MAC learning enabled); first L2BD with untagged interface to TG and vhost-user interface to local VM, second one with vhost-user interface to local VM and VXLAN interface towards the other DUT. Configure linux bridge on both VMs to pass traffic between both vhost-user interfaces.  |br| [Ver] Make TG send ICMPv4 Echo Req between two of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between these TG interfaces.  |br| [Ref] RFC7348.       | PASS   |
+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4vxlan-l2bdbasemaclrn-func
'''''''''''''''''''''''''''''''''''''

**Bridge-domain with VXLAN test cases - IPv4**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                       | Status |
+=====================================================================================+=====================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4 tunnels switch ICMPv4 between TG links | [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on  DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure two i/fs into L2BD with MAC learning.  |br| [Ver] Make TG verify ICMPv4 Echo Req pkts are switched thru DUT1 and DUT2 in both directions and are correct on receive.  |br| [Ref] RFC7348.       | PASS   |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4vxlan-l2xcbase-func
'''''''''''''''''''''''''''''''

**RFC7348 VXLAN: L2 cross-connect with VXLAN test cases**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 cross-connect (L2XC) switching; VXLAN tunnels are configured between L2XCs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                            | Status |
+=====================================================================================+==========================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2XC and VXLANoIPv4 tunnels switch ICMPv4 between TG links | [Top] TG-DUT1-DUT2-TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on   |br| [Ref] RFC7348.DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure L2 cross-connect (L2XC), each with one interface to TG and one VXLAN tunnel interface towards the other DUT.  |br| [Ver] Make TG send ICMPv4 Echo Req between two of its interfaces; verify all packets are received.  |br| [Ref] RFC7348.       | PASS   |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6vxlan-l2bdbasemaclrn-eth-2vhost-1vm-func
''''''''''''''''''''''''''''''''''''''''''''''''''''

**L2BD with VM combined with VXLAN test cases - IPv6**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for L2 switching of IPv6.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Status |
+=====================================================================================================+============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01:DUT1 and DUT2 with two L2BDs and VXLANoIPv6 tunnel switch ICMPv6 between TG links and VM links | [Top] TG-DUT1-VM-DUT1-DUT2-VM-DUT2-TG.  |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn and DUTn=VM.  |br| [Cfg] On both DUTs configure two L2BDs (MAC learning enabled); first L2BD with untagged interface to TG and vhost-user interface to local VM, second one with vhost-user interface to local VM and VXLAN interface towards the other DUT. Configure linux bridge on both VMs to pass traffic between both vhost-user interfaces.  |br| [Ver] Make TG send ICMPv6 Echo Req between two of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between these TG interfaces.  |br| [Ref] RFC7348.       | PASS   |
+-----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6vxlan-l2bdbasemaclrn-func
'''''''''''''''''''''''''''''''''''''

**Bridge-domain with VXLAN test cases - IPv6**   

 - **[Top] Network topologies:** TG-DUT1-DUT2-TG 3-node circular topology with single links between nodes.  

 - **[Enc] Packet encapsulations:** Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for L2 switching of IPv6.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled; VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv6 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                       | Status |
+=====================================================================================+=====================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv6 tunnels switch ICMPv6 between TG links | [Top] TG=DUT1=DUT2=TG. |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on  DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] On DUT1 and DUT2 configure L2 bridge-domain (MAC learning enabled), each with one interface to TG and one VXLAN tunnel interface towards the other DUT.  |br| [Ver] Make TG send ICMPv6 Echo Req between two of its interfaces to be switched by DUT1 and DUT2; verify all packets are received.  |br| [Ref] RFC7348.       | PASS   |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth4p-ethip4vxlan-l2bdbasemaclrn-l2shg-func
'''''''''''''''''''''''''''''''''''''''''''

**L2BD with SHG combined with VXLAN test cases - IPv4**   

 - **[Top] Network topologies:** TG=DUT1=DUT2=TG 3-node circular topology with double parallel links.  

 - **[Enc] Packet encapsulations:** Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on DUT1-DUT2, Eth-IPv4-ICMPv4 on TG-DUTn for L2 switching of IPv4.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled and Split Horizon Groups (SHG); VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv4 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                  | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+=======================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4 tunnels in SHG switch ICMPv4 between TG links            | [Top] TG=DUT1=DUT2=TG.  |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on  DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the same Split-Horizon-Group (SHG). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv4 Echo Reqs between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are not switched between TG interfaces connected to DUT2 that are isolated by SHG on DUT1.  |br| [Ref] RFC7348.       | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv4 tunnels in different SHGs switch ICMPv4 between TG links | [Top] TG=DUT1=DUT2=TG. |br| [Enc] Eth-IPv4-VXLAN-Eth-IPv4-ICMPv4 on  DUT1-DUT2; Eth-IPv4-ICMPv4 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the different Split-Horizon-Group (SHGs). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv4 Echo Req between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between all TG interfaces.  |br| [Ref] RFC7348.                                                      | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth4p-ethip6vxlan-l2bdbasemaclrn-l2shg-func
'''''''''''''''''''''''''''''''''''''''''''

**L2BD with SHG combined with VXLAN test cases - IPv6**   

 - **[Top] Network topologies:** TG=DUT1=DUT2=TG 3-node circular topology with double parallel links.  

 - **[Enc] Packet encapsulations:** th-IPv6-VXLAN-Eth-IPv6-ICMPv6 on DUT1-DUT2, Eth-IPv6-ICMPv6 on TG-DUTn for L2 switching of IPv6.  

 - **[Cfg] DUT configuration:** DUT1 and DUT2 are configured with L2 bridge-domain (L2BD) switching combined with MAC learning enabled and Split Horizon Groups (SHG); VXLAN tunnels are configured between L2BDs on DUT1 and DUT2.  

 - **[Ver] TG verification:** Test ICMPv4 Echo Request packets are sent in both directions by TG on links to DUT1 and DUT2; on receive TG verifies packets for correctness and their IPv6 src-addr, dst-addr and MAC addresses.  

 - **[Ref] Applicable standard specifications:** RFC7348.

+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                                                  | Documentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Status |
+=======================================================================================================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT1 and DUT2 with L2BD and VXLANoIPv6 tunnels in SHG switch ICMPv6 between TG links            | [Top] TG=DUT1=DUT2=TG.  |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on  DUT1-DUT2; Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the same Split-Horizon-Group (SHG). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv6 Echo Reqs between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are not switched between TG interfaces connected to DUT2 that are isolated by SHG on DUT1.  |br| [Ref] RFC7348.       | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT1 and DUT2 with L2BD and VXLANoIPv6 tunnels in different SHGs switch ICMPv6 between TG links | [Top] TG=DUT1=DUT2=TG. |br| [Enc] Eth-IPv6-VXLAN-Eth-IPv6-ICMPv6 on  DUT1-DUT2; Eth-IPv6-ICMPv6 on TG-DUTn.  |br| [Cfg] On DUT1 configure L2 bridge-domain (MAC learning enabled) with two untagged interfaces to TG and two VXLAN interfaces towards the DUT2 and put both VXLAN interfaces into the different Split-Horizon-Group (SHGs). On DUT2 configure two L2 bridge-domain (MAC learning enabled), each with one untagged interface to TG and one VXLAN interface towards the DUT1.  |br| [Ver] Make TG send ICMPv6 Echo Req between all four of its interfaces to be switched by DUT1 and DUT2; verify packets are switched between all TG interfaces.  |br| [Ref] RFC7348.                                                      | PASS   |
+-------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

