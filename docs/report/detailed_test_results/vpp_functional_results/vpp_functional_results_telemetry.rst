
.. |br| raw:: html

    <br />

Telemetry - IPFIX and SPAN
--------------------------

eth2p-ethip4-ip4base-ip4ipfixbase-func
......................................

**IPFIX ipv4 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector. Test packets are sent from TG to DUT1. TG listens for flow report packets and verifies that they contains flow record of test packets sent.

+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                      | Documentation                                                                                                                                                                                                                                                                                                                                              | Status |
+===========================================================================+============================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT sends IPFIX template and data packets                           | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and a basic classify session.  |br| [Ver] Make TG listen for IPFIX template and data packets, verify that packet is received and correct. No packets are sent from TG.  |br| [Ref] RFC 7011                                                              | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow for traffic by source address               | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                                        | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT reports packet flow for traffic with local destination address  | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT1.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                              | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT reports packet flow for traffic with remote destination address | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT2.  |br| [Ver] Make TG send a packet to DUT2 through DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                 | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC05: DUT reports packet flow for traffic by source and destination port  | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address and source and destination ports.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011       | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-ip4ipfixscale-func
.......................................

**IPFIX ipv4 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector. Test packets are sent from TG to DUT1. TG listens for flow report packets and verifies that they contains flow record of test packets sent.

+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                         | Status |
+=====================================================================+=======================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT reports packet flow with a large number of packets        | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send packets to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets.  |br| [Ref] RFC 7011                                                                                   | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow when multiple sessions are configured | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add several classify sessions with different ports.  |br| [Ver] Make TG send packets to DUT1 using a range of ports matching configured sessions, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets for each session.  |br| [Ref] RFC 7011       | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ip6ipfixbase-func
......................................

**IPFIX ipv6 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 and IPV6 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector.Test packets are sent from TG to or through DUT1. TG listens for flow report packets and verifies that they contains flow records of test packets sent.

+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                      | Documentation                                                                                                                                                                                                                                                                                                                                              | Status |
+===========================================================================+============================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT reports packet flow for traffic by source address               | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                                        | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow for traffic with local destination address  | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT1.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                              | FAIL   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC03: DUT reports packet flow for traffic with remote destination address | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with destination address of DUT2.  |br| [Ver] Make TG send a packet to DUT2 through DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011                 | FAIL   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC04: DUT reports packet flow for traffic by source and destination port  | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address and source and destination ports.  |br| [Ver] Make TG send a packet to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packet.  |br| [Ref] RFC 7011       | PASS   |
+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-ip6ipfixscale-func
.......................................

**IPFIX ipv6 test cases**  IPFIX tests use 3-node topology TG - DUT1 - DUT2 - TG with one link between the nodes. DUT1 is configured with IPv4 and IPV6 routing and static routes. IPFIX is configured on DUT1 with DUT1->TG interface as collector.Test packets are sent from TG to or through DUT1. TG listens for flow report packets and verifies that they contains flow records of test packets sent.

+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                                | Documentation                                                                                                                                                                                                                                                                                                                                                                                         | Status |
+=====================================================================+=======================================================================================================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT reports packet flow with a large number of packets        | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add classify session with TG source address.  |br| [Ver] Make TG send packets to DUT1, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets.  |br| [Ref] RFC 7011                                                                                   | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT reports packet flow when multiple sessions are configured | [Top] TG-DUT1-DUT2-TG.  |br| [Cfg] On DUT1 configure IPFIX with TG interface address as collector and add several classify sessions with different ports.  |br| [Ver] Make TG send packets to DUT1 using a range of ports matching configured sessions, then listen for IPFIX template and data packets, verify that IPFIX reported the received packets for each session.  |br| [Ref] RFC 7011       | PASS   |
+---------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip4-ip4base-spanrx-func
................................

**SPAN test suite**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** DUT1 is configured with SPAN mirroring from the first DUT1-TG interface to the second one.  

 - **[Ver] TG verification:** Test ARP or ICMP packets are sent by TG on first link to DUT1; On receipt through second link TG verifies the copy of packet sent and the copy of DUT's reply packet.  

 - **[Ref] Applicable standard specifications: None?**

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                         | Documentation                                                                                                                                                                                                                                                                                                            | Status |
+==============================================================+==========================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT mirrors L2 packets from one interface to another   | [Top] TG=DUT1  |br| [Cfg] On DUT1 configure IPv4 address and set SPAN mirroring from one DUT interface to the other.  |br| [Ver] Make TG send an ARP packet to DUT through one interface, then receive a copy of sent packet and of DUT's ARP reply on the second interface.                                             | PASS   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| TC02: DUT mirrors IPv4 packets from one interface to another | [Top] TG=DUT1  |br| [Cfg] On DUT1 configure IPv4 address, add ARP entry for one TG  interface and set SPAN mirroring from one DUT interface to the other.  |br| [Ver] Make TG send an ICMP packet to DUT through one interface, then receive a copy of sent packet and of DUT's ICMP reply on the other interface.       | PASS   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

eth2p-ethip6-ip6base-spanrx-func
................................

**SPAN test suite**  

 - **[Top] Network Topologies:** TG=DUT1 2-node topology with two links between nodes.  

 - **[Cfg] DUT configuration:** DUT1 is configured with SPAN mirroring from the first DUT1-TG interface to the second one.  

 - **[Ver] TG verification:** Test ARP or ICMP packets are sent by TG on first link to DUT1; On receipt through second link TG verifies the copy of packet sent and the copy of DUT's reply packet.  

 - **[Ref] Applicable standard specifications: None?**

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name                                                         | Documentation                                                                                                                                                                                                                                                                                                            | Status |
+==============================================================+==========================================================================================================================================================================================================================================================================================================================+========+
| TC01: DUT mirrors IPv6 packets from one interface to another | [Top] TG=DUT1  |br| [Cfg] On DUT1 configure IPv6 address, add ARP entry for one TG  interface and set SPAN mirroring from one DUT interface to the other.  |br| [Ver] Make TG send an ICMP packet to DUT through one interface, then receive a copy of sent packet and of DUT's ICMP reply on the other interface.       | PASS   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

