L2 Ethernet Interface Loop
==========================

This section includes summary graphs of Testpmd Phy-to-Phy packet
latency with L2 Ethernet Interface Loop measured at 50% of discovered
NDR throughput rate. Latency is reported for VPP running in multiple
configurations of VPP worker thread(s), a.k.a. VPP data plane thread(s),
and their physical CPU core(s) placement.

Results are generated from a single execution of CSIT NDR discovery
test. Box plots are used to show the Minimum, Average and Maximum packet
latency per test.

*Title of each graph* is a regex (regular expression) matching all
throughput test cases plotted on this graph, *X-axis labels* are indeces
of individual test suites executed by csit-dpdk-perf-1704 job that
created result output file used as data source for the graph, *Y-axis
labels* are measured packet Latency [uSec] values, and the *Graph
legend* lists the plotted test suites and their indeces. Latency is
reported for concurrent symmetric bi-directional flows, separately for
each direction: i) West-to-East: TGint1-to-SUT1-to-SUT2-to-TGint2, and
ii) East-to-West: TGint2-to-SUT2-to-SUT1-to-TGint1.

.. note::

    Data sources for reported test results: i) FD.io test executor jobs
    `csit-dpdk-perf-1704-all
    <https://jenkins.fd.io/view/csit/job/csit-dpdk-perf-1704-all/>`_ ,
    ii) archived FD.io jobs test result
    `csit-dpdk-perf-1704-all#job-number <https://nexus.fd.io/link>`_.

Testpmd packet latency - running in configuration of **one worker thread (1t) on one
physical core (1c)** - is presented in the figure below.

.. raw:: html

    <iframe width="700" height="1000" frameborder="0" scrolling="no" src="../../_static/testpmd/64B-1t1c-l2-ndrdisc-lat50.html"></iframe>

*Figure 1. Testpmd 1thread 1core - packet latency for Phy-to-Phy L2 Ethernet Looping.*

CSIT test cases used to generate results presented above can be found in CSIT
git repository by filtering with specified regex as follows:

.. code-block:: bash

    $ csit/tests/perf
    $ grep -E "64B-1t1c-(eth|dot1q|dot1ad)-(l2xcbase|l2bdbasemaclrn)-ndrdisc" *

    10ge2p1x520-eth-l2xcbase-ndrdisc.robot:| tc01-64B-1t1c-eth-l2xcbase-ndrdisc

Testpmd packet latency - running in configuration of **two worker threads (2t)
on two physical cores (2c)** - is presented in the figure below.

.. raw:: html

    <iframe width="700" height="1000" frameborder="0" scrolling="no" src="../../_static/testpmd/64B-2t2c-l2-ndrdisc-lat50.html"></iframe>

*Figure 2. Testpmd 2thread 2core - packet latency for Phy-to-Phy L2 Ethernet Looping.*

CSIT test cases used to generate results presented above can be found in CSIT
git repository by filtering with specified regex as follows:

.. code-block:: bash

    $ csit/tests/perf
    $ grep -E "64B-2t2c-(eth|dot1q|dot1ad)-(l2xcbase|l2bdbasemaclrn)-ndrdisc" *

    10ge2p1x520-eth-l2xcbase-ndrdisc.robot:| tc07-64B-2t2c-eth-l2xcbase-ndrdisc

