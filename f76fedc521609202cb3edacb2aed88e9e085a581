{
  "comments": [
    {
      "key": {
        "uuid": "be973c46_41d5c62b",
        "filename": "GPL/traffic_scripts/send_flow_packet.py",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 1263
      },
      "writtenOn": "2021-04-06T14:03:44Z",
      "side": 1,
      "message": "I know there is vpp_flow_verify_action to check the VPP behavior, but that is just looking at some VPP counters. I would prefer a real check on returning packet here (configurable, so it checks no packet arrives within some time in test cases when that is expected).",
      "range": {
        "startLine": 119,
        "startChar": 20,
        "endLine": 119,
        "endChar": 21
      },
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "176f2b42_419e0311",
        "filename": "GPL/traffic_scripts/send_flow_packet.py",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 2247
      },
      "writtenOn": "2021-04-09T08:47:10Z",
      "side": 1,
      "message": "checked the pkt info in vpp_flow_verify_action:\n\n            mac_matched \u003d f\"{src_mac} -\u003e {dst_mac}\"\n\n            if action \u003d\u003d u\"drop\":\n                if mac_matched in stdout:\n                    raise ValueError(\n                        u\"The flow packet dropped failed\"\n                    )\n            elif action \u003d\u003d u\"redirect-to-queue\":\n                queue_matched \u003d f\"queue {value}\"\n                if queue_matched not in stdout and\\\n                        mac_matched not in stdout:\n                    raise ValueError(\n                        u\"The flow packet redirected to queue failed\"\n                    )\n            elif action \u003d\u003d u\"mark\":\n                if u\"PKT_RX_FDIR\" not in stdout and\\\n                        mac_matched not in stdout:",
      "parentUuid": "be973c46_41d5c62b",
      "range": {
        "startLine": 119,
        "startChar": 20,
        "endLine": 119,
        "endChar": 21
      },
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "955290db_0ee6bf84",
        "filename": "resources/libraries/bash/entry/bootstrap_vpp_offload.sh",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1263
      },
      "writtenOn": "2021-04-06T14:03:44Z",
      "side": 1,
      "message": "This (and adding files to tests/vpp/offload) looks like a support for a new CSIT job type (different from both perf and device tests). But the added suites look just like device tests.\nI get that the new suites need NIC capabilities that are not present on currently employed devicetest testbeds, but that should be handled by adding tags and exclusions in other parts of existing bootstrap functions. Search for \"ipsechw\" to see how we avoid running suites which need QAT on testbeds without QAT.",
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db6838a4_b61239cd",
        "filename": "resources/libraries/bash/entry/bootstrap_vpp_offload.sh",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2247
      },
      "writtenOn": "2021-04-09T08:47:10Z",
      "side": 1,
      "message": "fised to use existing bootstrap file",
      "parentUuid": "955290db_0ee6bf84",
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "771b195b_1d7fd7b9",
        "filename": "resources/libraries/bash/entry/bootstrap_vpp_offload.sh",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2247
      },
      "writtenOn": "2021-04-12T08:36:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "db6838a4_b61239cd",
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "942ed91b_5ed26b25",
        "filename": "tests/vpp/offload/flow/eth2p-flow-ip4-gtpu.robot",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1263
      },
      "writtenOn": "2021-04-06T14:03:44Z",
      "side": 1,
      "message": "No sleep!\nIf the previous commands pass while VPP is still unable to process the next packet correctly, it is probably a VPP bug. If there are legitimate reasons for VPP to not be ready when responding to API commands, VPP should be changed to either block before responding (simple but not performant) or generate an event when it becomes ready (more tricky to implement on VPP side, and on CSIT to listen for the event).",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 22
      },
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6ce8735_aaba3a77",
        "filename": "tests/vpp/offload/flow/eth2p-flow-ip4-gtpu.robot",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 2247
      },
      "writtenOn": "2021-04-12T08:36:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "942ed91b_5ed26b25",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 22
      },
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cffdfdf6_cdd05583",
        "filename": "tests/vpp/offload/flow/eth2p-flow-ip4-gtpu.robot",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 2247
      },
      "writtenOn": "2021-04-13T07:35:12Z",
      "side": 1,
      "message": "this issue is caused by csit method verify_vpp_started in resources/libraries/python/VPPUtil.py\nthe detail lines:\n        cmd \u003d u\"for i in $(sudo vppctl sho int | grep Eth | cut -d\u0027 \u0027 -f1); do\"\\\n              u\" sudo vppctl set int sta $i up; done\"\n        exec_cmd(node, cmd, sudo\u003dFalse)\n\nif the above lines is not used, there is no need to wait here.\n\ntemporarily, I will modify the code and put the wait in python method.",
      "parentUuid": "a6ce8735_aaba3a77",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 22
      },
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edc76102_afe86e58",
        "filename": "tests/vpp/offload/flow/eth2p-flow-ip4-gtpu.robot",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 2247
      },
      "writtenOn": "2021-04-15T01:18:05Z",
      "side": 1,
      "message": "fixed, thanks",
      "parentUuid": "cffdfdf6_cdd05583",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 22
      },
      "revId": "f76fedc521609202cb3edacb2aed88e9e085a581",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}