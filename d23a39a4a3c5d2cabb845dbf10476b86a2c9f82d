{
  "comments": [
    {
      "key": {
        "uuid": "911598ef_3ac33df8",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 756,
      "author": {
        "id": 1263
      },
      "writtenOn": "2020-01-02T15:44:59Z",
      "side": 1,
      "message": "This is the limit on how many allocations above nr_hugepages (limit for persistent hugepages) system permits. If you are looking for the number of such pages currently allocated, you should read \"surplus_hugepages\" instead (and beware that it can be more than nr_overcommit_hugepages, e.g. when nr_hugepages has been decreased recently).",
      "range": {
        "startLine": 756,
        "startChar": 14,
        "endLine": 756,
        "endChar": 37
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6858e04_d57a86aa",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 756,
      "author": {
        "id": 76
      },
      "writtenOn": "2020-01-03T06:36:41Z",
      "side": 1,
      "message": "No, that is what documentation tells you, but not what is happening. During testing there was not a surplus. Surplus was zero and it was above \"nr_hugepages\" on vpp device while overcommit was high. Eg. nr_hugepages\u003d1518, surplus\u003d0, nr_overcommit_hugepages\u003d65535, the real hugepages number was 1518 (configured persistent was 1024). The problem of sysfs is that it lacks of more counters and it is very hard to see the real state only from /sys/. /proc/meminfo seems to be more accurate (or combination of both)",
      "parentUuid": "911598ef_3ac33df8",
      "range": {
        "startLine": 756,
        "startChar": 14,
        "endLine": 756,
        "endChar": 37
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d799f563_2fbc9369",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 756,
      "author": {
        "id": 1263
      },
      "writtenOn": "2020-01-03T13:33:29Z",
      "side": 1,
      "message": "\u003e Eg. nr_hugepages\u003d1518, surplus\u003d0, nr_overcommit_hugepages\u003d65535, the real hugepages number was 1518 (configured persistent was 1024).\n\nMy understanding is that \"configured persistent\" is nr_hugepages. Or do you mean 1024 was configured at the start, but later something changed the value to 1518?",
      "parentUuid": "a6858e04_d57a86aa",
      "range": {
        "startLine": 756,
        "startChar": 14,
        "endLine": 756,
        "endChar": 37
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "661bf058_0ab92b42",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 756,
      "author": {
        "id": 76
      },
      "writtenOn": "2020-01-03T14:25:12Z",
      "side": 1,
      "message": "From investigation VPP is doing nr_hugepage increase if it hits the limit (no matter of overcommit). That is btw why make test is working on system with 1024HP as it is doing increase up to the point of peak.",
      "parentUuid": "d799f563_2fbc9369",
      "range": {
        "startLine": 756,
        "startChar": 14,
        "endLine": 756,
        "endChar": 37
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0015b4fa_2ad5413e",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 776,
      "author": {
        "id": 1263
      },
      "writtenOn": "2020-01-02T15:44:59Z",
      "side": 1,
      "message": "This selects the number of \"persistent\" huge pages. That includes free pages and pages allocated below the persistence limit, but not the surplus (overcommit allocated) pages.\nUpdate docstring and maybe even method name, depending on the intended usage.",
      "range": {
        "startLine": 776,
        "startChar": 14,
        "endLine": 776,
        "endChar": 26
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca77ec1a_405f1316",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 776,
      "author": {
        "id": 76
      },
      "writtenOn": "2020-01-03T06:36:41Z",
      "side": 1,
      "message": "Docstring and name is correct per intended usage.",
      "parentUuid": "0015b4fa_2ad5413e",
      "range": {
        "startLine": 776,
        "startChar": 14,
        "endLine": 776,
        "endChar": 26
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10f4b813_b57bd28a",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 812,
      "author": {
        "id": 1263
      },
      "writtenOn": "2020-01-02T15:44:59Z",
      "side": 1,
      "message": "Maybe storing to variables named the same way as the pseudo-filesystem files would help.\n  free_hugepages + (nr_overcommit_hugepages - surplus_hugepages)",
      "range": {
        "startLine": 812,
        "startChar": 29,
        "endLine": 812,
        "endChar": 63
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0eab9a3_a290fe15",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 812,
      "author": {
        "id": 76
      },
      "writtenOn": "2020-01-03T06:36:41Z",
      "side": 1,
      "message": "Both formulas are wrong. I made several observations how system behaves and none of these are correct. I need to rewrite it.",
      "parentUuid": "10f4b813_b57bd28a",
      "range": {
        "startLine": 812,
        "startChar": 29,
        "endLine": 812,
        "endChar": 63
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1973d98b_bfc06123",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 812,
      "author": {
        "id": 1263
      },
      "writtenOn": "2020-01-03T13:33:29Z",
      "side": 1,
      "message": "Can you put the observed states to some table?\nnr_hugepages, nr_overcommit_hugepages, free_hugepages, surplus_hugepages, resv_hugepages, how big an allocation was attempted, and whether is succeeded.\nIdeally to docstring (if not too big) to explain why the implementation needs to do something not obvious.",
      "parentUuid": "c0eab9a3_a290fe15",
      "range": {
        "startLine": 812,
        "startChar": 29,
        "endLine": 812,
        "endChar": 63
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b5df51c_8c57cab3",
        "filename": "resources/libraries/python/DUTSetup.py",
        "patchSetId": 4
      },
      "lineNbr": 812,
      "author": {
        "id": 76
      },
      "writtenOn": "2020-01-03T14:25:12Z",
      "side": 1,
      "message": "Definitely not docstring, but if you are interested:\n\n/sys/kernel/mm/hugepages/hugepages-2048kB/free_hugepages           1818\n/sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages             2567\n/sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages_mempolicy   2567\n/sys/kernel/mm/hugepages/hugepages-2048kB/nr_overcommit_hugepages  4096\n/sys/kernel/mm/hugepages/hugepages-2048kB/resv_hugepages           1818\n/sys/kernel/mm/hugepages/hugepages-2048kB/surplus_hugepages        1992\n\nSo tell me how much free hugepages do i have? is it 1818? But how is this number computed? Is it 4096-2567, but then why it does not match free or surplus.\n\nThe only numbers that matches are 2567 (yes they are used), 4096 this is hard set by me. Nothing else.",
      "parentUuid": "1973d98b_bfc06123",
      "range": {
        "startLine": 812,
        "startChar": 29,
        "endLine": 812,
        "endChar": 63
      },
      "revId": "d23a39a4a3c5d2cabb845dbf10476b86a2c9f82d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}